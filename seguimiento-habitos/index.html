<!DOCTYPE html>
<html lang="es" translate="yes">
<head>
    <meta charset="UTF-8">

    <!-- Meta tags para traducci√≥n autom√°tica del navegador -->
    <meta name="google" content="translate">
    <meta http-equiv="content-language" content="es">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seguimiento de H√°bitos - meskeIA</title>
    <link rel="icon" type="image/png" href="icon_meskeia.png">

    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>

    <style>
        /* Variables CSS - Paleta meskeIA */
        :root {
            /* Backgrounds - Inspirados en Claude */
            --bg-primary: #FAFAFA;
            --bg-card: #FFFFFF;

            /* Identidad de marca meskeIA */
            --primary: #2E86AB;
            --secondary: #48A9A6;

            /* Textos minimalistas */
            --text-primary: #1A1A1A;
            --text-secondary: #666666;
            --text-muted: #999999;

            /* Elementos estructurales */
            --border: #E5E5E5;
            --hover: #F5F5F5;
            --focus: rgba(46,134,171,0.1);

            /* Estados de h√°bitos */
            --completado: #48A9A6;
            --pendiente: #E5E5E5;
            --fallado: #E57373;
        }

        /* Reset y estilos base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 20px;
            padding-top: 80px;
            padding-bottom: 60px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Barra de acciones */
        .actions-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(46, 134, 171, 0.2);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--focus);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        /* Secci√≥n de h√°bitos */
        .habitos-container {
            margin-bottom: 40px;
        }

        .habito-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .habito-card:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .habito-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .habito-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .habito-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid var(--border);
        }

        .habito-nombre {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .habito-racha {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 1.1rem;
            color: var(--secondary);
            font-weight: 600;
        }

        .habito-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        .stat-item {
            display: flex;
            flex-direction: column;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .stat-value {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--pendiente);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.5s ease;
        }

        .habito-actions {
            display: flex;
            gap: 10px;
        }

        .btn-icon {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .btn-icon:hover {
            background: var(--hover);
        }

        /* Calendario mensual */
        .calendario-section {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .calendario-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendario-header h2 {
            color: var(--primary);
            font-size: 1.5rem;
        }

        .calendario-nav {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .calendario-nav button {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .calendario-nav button:hover {
            background: var(--hover);
        }

        .mes-actual {
            font-weight: 600;
            color: var(--text-primary);
            min-width: 150px;
            text-align: center;
        }

        .calendario-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .dia-semana {
            text-align: center;
            font-weight: 600;
            color: var(--text-secondary);
            padding: 10px;
            font-size: 0.85rem;
        }

        .dia-celda {
            aspect-ratio: 1;
            border: 2px solid var(--border);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            background: var(--bg-card);
        }

        .dia-celda:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .dia-numero {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .dia-indicadores {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            justify-content: center;
        }

        .indicador-habito {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .dia-otro-mes {
            opacity: 0.3;
            pointer-events: none;
        }

        .dia-hoy {
            border-color: var(--primary);
            border-width: 3px;
            font-weight: 700;
        }

        /* Leyenda del calendario */
        .calendario-leyenda {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            padding-top: 15px;
            border-top: 1px solid var(--border);
        }

        .leyenda-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .leyenda-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        /* Secci√≥n de estad√≠sticas */
        .estadisticas-section {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .estadisticas-section h2 {
            color: var(--primary);
            margin-bottom: 20px;
        }

        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        /* Secci√≥n de logros */
        .logros-section {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .logros-section h2 {
            color: var(--primary);
            margin-bottom: 20px;
        }

        .logros-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .logro-card {
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid var(--border);
        }

        .logro-card.desbloqueado {
            border-color: var(--secondary);
            background: linear-gradient(135deg, rgba(46, 134, 171, 0.05), rgba(72, 169, 166, 0.05));
        }

        .logro-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .logro-icono {
            font-size: 2.5rem;
            margin-bottom: 8px;
        }

        .logro-card.bloqueado .logro-icono {
            filter: grayscale(100%);
            opacity: 0.3;
        }

        .logro-titulo {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
            margin-bottom: 5px;
        }

        .logro-descripcion {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            color: var(--primary);
            font-size: 1.5rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted);
            transition: color 0.2s;
        }

        .modal-close:hover {
            color: var(--text-primary);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--focus);
        }

        .colores-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        .color-option {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 8px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.selected {
            border-color: var(--text-primary);
            box-shadow: 0 0 0 2px var(--bg-card), 0 0 0 4px var(--primary);
        }

        /* Modal de celebraci√≥n */
        .modal-celebracion {
            text-align: center;
        }

        .celebracion-icono {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: celebrar 0.6s ease-in-out;
        }

        @keyframes celebrar {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(-10deg); }
            75% { transform: scale(1.2) rotate(10deg); }
        }

        .celebracion-titulo {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .celebracion-mensaje {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Estado vac√≠o */
        .estado-vacio {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }

        .estado-vacio-icono {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .estado-vacio p {
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        /* Logo meskeIA - Componente oficial */
        .meskeia-logo-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(46, 134, 171, 0.2);
            border-radius: 12px;
            padding: 8px 16px;
            box-shadow: 0 4px 20px rgba(46, 134, 171, 0.1);
            transition: all 0.3s ease;
        }

        .meskeia-logo-container:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 25px rgba(46, 134, 171, 0.15);
        }

        .meskeia-logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #2E86AB 0%, #48A9A6 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .meskeia-logo-icon::before {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            top: 10px;
            left: 10px;
        }

        .meskeia-logo-icon::after {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            background: #2E86AB;
            border-radius: 50%;
            top: 13px;
            left: 13px;
        }

        .meskeia-neural-network {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0.3;
        }

        .meskeia-neural-dot {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
        }

        .meskeia-neural-dot:nth-child(1) { top: 4px; left: 6px; }
        .meskeia-neural-dot:nth-child(2) { top: 8px; right: 5px; }
        .meskeia-neural-dot:nth-child(3) { bottom: 6px; left: 4px; }
        .meskeia-neural-dot:nth-child(4) { bottom: 4px; right: 8px; }

        .meskeia-logo-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2C3E50;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .meskeia-logo-text .meske {
            color: #2E86AB;
        }

        .meskeia-logo-text .ia {
            color: #48A9A6;
            font-weight: 700;
            position: relative;
        }

        .meskeia-logo-text .ia::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #48A9A6, #7FB3D3);
            border-radius: 1px;
        }

        /* Animaciones para mensajes */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(10px); }
        }

        /* Estilos para impresi√≥n */
        @media print {
            body {
                background: white;
                padding: 20px;
            }

            .meskeia-logo-container,
            footer,
            .actions-bar,
            .btn,
            .btn-icon,
            .modal,
            .calendario-nav {
                display: none !important;
            }

            .habito-card,
            .calendario-section,
            .estadisticas-section,
            .logros-section {
                box-shadow: none;
                border: 1px solid var(--border);
                page-break-inside: avoid;
            }

            .header h1 {
                color: black;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                padding-top: 70px;
                padding-bottom: 50px;
            }

            .meskeia-logo-container {
                top: 10px;
                left: 10px;
                padding: 6px 12px;
                gap: 8px;
            }

            .meskeia-logo-icon {
                width: 24px;
                height: 24px;
            }

            .meskeia-logo-icon::before {
                width: 9px;
                height: 9px;
                top: 7.5px;
                left: 7.5px;
            }

            .meskeia-logo-icon::after {
                width: 4px;
                height: 4px;
                top: 10px;
                left: 10px;
            }

            .meskeia-logo-text {
                font-size: 1rem;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .actions-bar {
                flex-direction: column;
                align-items: stretch;
            }

            .calendario-grid {
                gap: 4px;
            }

            .dia-celda {
                font-size: 0.8rem;
            }

            .indicador-habito {
                width: 6px;
                height: 6px;
            }

            .charts-container {
                grid-template-columns: 1fr;
            }

            .logros-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Logo meskeIA -->
    <div class="meskeia-logo-container" onclick="window.location.href='../index.html'" style="cursor: pointer;">
        <div class="meskeia-logo-icon">
            <div class="meskeia-neural-network">
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
            </div>
        </div>
        <div class="meskeia-logo-text">
            <span class="meske">meske</span><span class="ia">IA</span>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üìä Seguimiento de H√°bitos</h1>
            <p>Construye rutinas saludables con visualizaci√≥n de rachas</p>
        </div>

        <!-- Barra de acciones -->
        <div class="actions-bar">
            <button class="btn" onclick="abrirModalNuevoHabito()">
                ‚ûï Nuevo H√°bito
            </button>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="btn btn-secondary btn-small" onclick="exportarRespaldo()">
                    üíæ Exportar Respaldo
                </button>
                <button class="btn btn-secondary btn-small" onclick="document.getElementById('importarInput').click()">
                    üì• Importar Respaldo
                </button>
                <input type="file" id="importarInput" accept=".json" style="display: none;" onchange="importarRespaldo(event)">
                <button class="btn btn-secondary btn-small" onclick="window.print()">
                    üñ®Ô∏è Imprimir
                </button>
            </div>
        </div>

        <!-- Secci√≥n de h√°bitos -->
        <div class="habitos-container" id="habitosContainer">
            <!-- Se renderizar√° din√°micamente con JavaScript -->
        </div>

        <!-- Calendario mensual -->
        <div class="calendario-section">
            <div class="calendario-header">
                <h2>üìÖ Calendario Mensual</h2>
                <div class="calendario-nav">
                    <button onclick="cambiarMes(-1)">‚Üê Anterior</button>
                    <span class="mes-actual" id="mesActual"></span>
                    <button onclick="cambiarMes(1)">Siguiente ‚Üí</button>
                </div>
            </div>
            <div class="calendario-grid" id="calendarioGrid">
                <!-- Se renderizar√° din√°micamente -->
            </div>
            <div class="calendario-leyenda" id="calendarioLeyenda">
                <!-- Se renderizar√° din√°micamente -->
            </div>
        </div>

        <!-- Estad√≠sticas -->
        <div class="estadisticas-section">
            <h2>üìà Estad√≠sticas</h2>
            <div class="charts-container">
                <div class="chart-wrapper">
                    <canvas id="chartTendencias"></canvas>
                </div>
                <div class="chart-wrapper">
                    <canvas id="chartDistribucion"></canvas>
                </div>
            </div>
        </div>

        <!-- Logros -->
        <div class="logros-section">
            <h2>üèÜ Mis Logros</h2>
            <div class="logros-grid" id="logrosGrid">
                <!-- Se renderizar√° din√°micamente -->
            </div>
        </div>
    </div>

    <!-- Modal para nuevo h√°bito -->
    <div class="modal" id="modalNuevoHabito">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitulo">Nuevo H√°bito</h3>
                <button class="modal-close" onclick="cerrarModal('modalNuevoHabito')">‚úï</button>
            </div>
            <form id="formHabito" onsubmit="guardarHabito(event)">
                <div class="form-group">
                    <label for="habitoNombre">Nombre del h√°bito *</label>
                    <input type="text" id="habitoNombre" placeholder="Ej: Ejercicio diario" required maxlength="50">
                </div>
                <div class="form-group">
                    <label for="habitoObjetivo">Objetivo de d√≠as consecutivos *</label>
                    <input type="number" id="habitoObjetivo" min="1" max="365" value="30" required>
                </div>
                <div class="form-group">
                    <label>Color del h√°bito *</label>
                    <div class="colores-grid" id="coloresGrid">
                        <!-- Se renderizar√° din√°micamente -->
                    </div>
                    <input type="hidden" id="habitoColor" required>
                </div>
                <div class="form-group">
                    <label for="habitoIcono">Icono (emoji)</label>
                    <input type="text" id="habitoIcono" placeholder="üí™" maxlength="2">
                </div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="submit" class="btn" style="flex: 1;">Guardar</button>
                    <button type="button" class="btn btn-secondary" onclick="cerrarModal('modalNuevoHabito')" style="flex: 1;">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de celebraci√≥n -->
    <div class="modal" id="modalCelebracion">
        <div class="modal-content modal-celebracion">
            <div class="celebracion-icono" id="celebracionIcono">üéâ</div>
            <h2 class="celebracion-titulo" id="celebracionTitulo">¬°Felicitaciones!</h2>
            <p class="celebracion-mensaje" id="celebracionMensaje"></p>
            <button class="btn" onclick="cerrarModal('modalCelebracion')" style="margin-top: 20px;">¬°Gracias!</button>
        </div>
    </div>

    <!-- Footer meskeIA -->
    <footer style="position: fixed; bottom: 10px; right: 20px; display: flex; align-items: center; gap: 10px; color: #2d3748; font-size: 0.9rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: rgba(255, 255, 255, 0.9); padding: 5px 15px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <span>¬© 2025 meskeIA</span>
        <span style="color: #E5E5E5; user-select: none;">|</span>
        <button type="button"
                onclick="compartirApp()"
                style="background: none; border: none; color: #2E86AB; cursor: pointer; font-size: 0.9rem; padding: 0; display: flex; align-items: center; gap: 4px; font-family: inherit; transition: opacity 0.2s;"
                onmouseover="this.style.opacity='0.7'"
                onmouseout="this.style.opacity='1'"
                title="Compartir esta herramienta">
            üîó <span style="text-decoration: underline;">Compartir</span>
        </button>
    </footer>

    <script>
        // ==========================================
        // ESTADO GLOBAL DE LA APLICACI√ìN
        // ==========================================
        let habitos = [];
        let mesActual = new Date();
        let habitoEditandoId = null;

        // Colores disponibles para h√°bitos
        const coloresDisponibles = [
            '#2E86AB', '#48A9A6', '#E57373', '#FFB74D',
            '#9575CD', '#4DB6AC', '#FF8A65', '#81C784',
            '#64B5F6', '#F06292'
        ];

        // Definici√≥n de logros
        const logrosDisponibles = [
            { id: 'racha_7', icono: 'üèÖ', titulo: '7 D√≠as', descripcion: 'Racha de 7 d√≠as', dias: 7 },
            { id: 'racha_30', icono: 'üî•', titulo: '30 D√≠as', descripcion: 'Racha de 30 d√≠as', dias: 30 },
            { id: 'racha_90', icono: 'üíé', titulo: '90 D√≠as', descripcion: 'Racha de 90 d√≠as', dias: 90 },
            { id: 'racha_180', icono: 'üëë', titulo: '180 D√≠as', descripcion: 'Racha de 180 d√≠as', dias: 180 },
            { id: 'racha_365', icono: 'üèÜ', titulo: '1 A√±o', descripcion: 'Racha de 365 d√≠as', dias: 365 },
            { id: 'perfecto_30', icono: '‚≠ê', titulo: 'Mes Perfecto', descripcion: '30 d√≠as sin fallos', dias: 30 }
        ];

        // ==========================================
        // INICIALIZACI√ìN
        // ==========================================
        document.addEventListener('DOMContentLoaded', () => {
            cargarDatos();
            renderizarColores();
            renderizarHabitos();
            renderizarCalendario();
            renderizarGraficos();
            renderizarLogros();
            verificarRecordatorios();
        });

        // ==========================================
        // GESTI√ìN DE DATOS (LocalStorage)
        // ==========================================
        function cargarDatos() {
            const datosGuardados = localStorage.getItem('seguimientoHabitos');
            if (datosGuardados) {
                try {
                    const datos = JSON.parse(datosGuardados);
                    habitos = datos.habitos || [];
                } catch (e) {
                    console.error('Error al cargar datos:', e);
                    habitos = [];
                }
            }
        }

        function guardarDatos() {
            const datos = {
                habitos: habitos,
                version: '1.0',
                ultimaActualizacion: new Date().toISOString()
            };
            localStorage.setItem('seguimientoHabitos', JSON.stringify(datos));
        }

        // ==========================================
        // GESTI√ìN DE H√ÅBITOS
        // ==========================================
        function abrirModalNuevoHabito() {
            if (habitos.length >= 5) {
                alert('Has alcanzado el l√≠mite de 5 h√°bitos activos. Elimina uno para crear otro.');
                return;
            }
            habitoEditandoId = null;
            document.getElementById('modalTitulo').textContent = 'Nuevo H√°bito';
            document.getElementById('formHabito').reset();
            document.getElementById('habitoObjetivo').value = 30;
            document.querySelectorAll('.color-option').forEach(el => el.classList.remove('selected'));
            abrirModal('modalNuevoHabito');
        }

        function guardarHabito(event) {
            event.preventDefault();

            const nombre = document.getElementById('habitoNombre').value.trim();
            const objetivo = parseInt(document.getElementById('habitoObjetivo').value);
            const color = document.getElementById('habitoColor').value;
            const icono = document.getElementById('habitoIcono').value.trim() || 'üìå';

            if (!color) {
                alert('Por favor, selecciona un color para el h√°bito');
                return;
            }

            if (habitoEditandoId) {
                // Editar h√°bito existente
                const habito = habitos.find(h => h.id === habitoEditandoId);
                if (habito) {
                    habito.nombre = nombre;
                    habito.objetivo = objetivo;
                    habito.color = color;
                    habito.icono = icono;
                }
            } else {
                // Crear nuevo h√°bito
                const nuevoHabito = {
                    id: Date.now().toString(),
                    nombre,
                    objetivo,
                    color,
                    icono,
                    registros: {},
                    fechaCreacion: new Date().toISOString()
                };
                habitos.push(nuevoHabito);
            }

            guardarDatos();
            cerrarModal('modalNuevoHabito');
            renderizarHabitos();
            renderizarCalendario();
            renderizarGraficos();
            renderizarLogros();
        }

        function eliminarHabito(id) {
            if (confirm('¬øEst√°s seguro de que deseas eliminar este h√°bito? Se perder√°n todos sus registros.')) {
                habitos = habitos.filter(h => h.id !== id);
                guardarDatos();
                renderizarHabitos();
                renderizarCalendario();
                renderizarGraficos();
                renderizarLogros();
            }
        }

        function editarHabito(id) {
            const habito = habitos.find(h => h.id === id);
            if (!habito) return;

            habitoEditandoId = id;
            document.getElementById('modalTitulo').textContent = 'Editar H√°bito';
            document.getElementById('habitoNombre').value = habito.nombre;
            document.getElementById('habitoObjetivo').value = habito.objetivo;
            document.getElementById('habitoIcono').value = habito.icono;
            document.getElementById('habitoColor').value = habito.color;

            // Seleccionar color
            document.querySelectorAll('.color-option').forEach(el => {
                el.classList.toggle('selected', el.dataset.color === habito.color);
            });

            abrirModal('modalNuevoHabito');
        }

        // ==========================================
        // REGISTRO DE D√çAS
        // ==========================================
        function toggleDia(habitoId, fecha) {
            const habito = habitos.find(h => h.id === habitoId);
            if (!habito) return;

            const fechaStr = fecha.toISOString().split('T')[0];
            const hoy = new Date().toISOString().split('T')[0];

            // No permitir marcar d√≠as futuros
            if (fechaStr > hoy) {
                alert('No puedes marcar d√≠as futuros');
                return;
            }

            // Toggle del estado
            if (habito.registros[fechaStr]) {
                delete habito.registros[fechaStr];
            } else {
                habito.registros[fechaStr] = true;
            }

            guardarDatos();
            renderizarHabitos();
            renderizarCalendario();
            renderizarGraficos();

            // Verificar logros
            verificarLogros(habitoId);
        }

        // ==========================================
        // C√ÅLCULOS DE ESTAD√çSTICAS
        // ==========================================
        function calcularRachaActual(habito) {
            const hoy = new Date();
            let racha = 0;
            let fecha = new Date(hoy);

            while (true) {
                const fechaStr = fecha.toISOString().split('T')[0];
                if (habito.registros[fechaStr]) {
                    racha++;
                    fecha.setDate(fecha.getDate() - 1);
                } else {
                    break;
                }
            }

            return racha;
        }

        function calcularMejorRacha(habito) {
            const fechasOrdenadas = Object.keys(habito.registros)
                .filter(f => habito.registros[f])
                .sort();

            if (fechasOrdenadas.length === 0) return 0;

            let mejorRacha = 1;
            let rachaActual = 1;

            for (let i = 1; i < fechasOrdenadas.length; i++) {
                const fechaAnterior = new Date(fechasOrdenadas[i - 1]);
                const fechaActual = new Date(fechasOrdenadas[i]);
                const diferenciaDias = (fechaActual - fechaAnterior) / (1000 * 60 * 60 * 24);

                if (diferenciaDias === 1) {
                    rachaActual++;
                    mejorRacha = Math.max(mejorRacha, rachaActual);
                } else {
                    rachaActual = 1;
                }
            }

            return mejorRacha;
        }

        function calcularTasaCumplimiento(habito) {
            const fechaInicio = new Date(habito.fechaCreacion);
            const hoy = new Date();
            const diasTranscurridos = Math.floor((hoy - fechaInicio) / (1000 * 60 * 60 * 24)) + 1;
            const diasCompletados = Object.keys(habito.registros).filter(f => habito.registros[f]).length;

            return diasTranscurridos > 0 ? Math.round((diasCompletados / diasTranscurridos) * 100) : 0;
        }

        // ==========================================
        // RENDERIZADO DE INTERFAZ
        // ==========================================
        function renderizarHabitos() {
            const container = document.getElementById('habitosContainer');

            if (habitos.length === 0) {
                container.innerHTML = `
                    <div class="estado-vacio">
                        <div class="estado-vacio-icono">üìä</div>
                        <p>A√∫n no tienes h√°bitos registrados</p>
                        <button class="btn" onclick="abrirModalNuevoHabito()">Crear mi primer h√°bito</button>
                    </div>
                `;
                return;
            }

            container.innerHTML = habitos.map(habito => {
                const rachaActual = calcularRachaActual(habito);
                const mejorRacha = calcularMejorRacha(habito);
                const tasaCumplimiento = calcularTasaCumplimiento(habito);

                return `
                    <div class="habito-card">
                        <div class="habito-header">
                            <div class="habito-info">
                                <div class="habito-color" style="background: ${habito.color};"></div>
                                <span class="habito-nombre">${habito.icono} ${habito.nombre}</span>
                            </div>
                            <div class="habito-racha">
                                üî• ${rachaActual} d√≠as
                            </div>
                        </div>
                        <div class="habito-stats">
                            <div class="stat-item">
                                <span class="stat-label">Mejor racha</span>
                                <span class="stat-value">${mejorRacha} d√≠as</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Objetivo</span>
                                <span class="stat-value">${habito.objetivo} d√≠as</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Cumplimiento</span>
                                <span class="stat-value">${tasaCumplimiento}%</span>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${Math.min((rachaActual / habito.objetivo) * 100, 100)}%;"></div>
                        </div>
                        <div class="habito-actions">
                            <button class="btn btn-secondary btn-small" onclick="marcarHoy('${habito.id}')">
                                ‚úì Marcar hoy
                            </button>
                            <button class="btn-icon" onclick="editarHabito('${habito.id}')" title="Editar">‚úèÔ∏è</button>
                            <button class="btn-icon" onclick="eliminarHabito('${habito.id}')" title="Eliminar">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function marcarHoy(habitoId) {
            toggleDia(habitoId, new Date());
        }

        function renderizarCalendario() {
            const grid = document.getElementById('calendarioGrid');
            const mesActualEl = document.getElementById('mesActual');

            // Actualizar t√≠tulo del mes
            const meses = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
                          'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            mesActualEl.textContent = `${meses[mesActual.getMonth()]} ${mesActual.getFullYear()}`;

            // Calcular primer y √∫ltimo d√≠a del mes
            const primerDia = new Date(mesActual.getFullYear(), mesActual.getMonth(), 1);
            const ultimoDia = new Date(mesActual.getFullYear(), mesActual.getMonth() + 1, 0);

            // D√≠as de la semana
            const diasSemana = ['L', 'M', 'M', 'J', 'V', 'S', 'D'];
            let html = diasSemana.map(dia => `<div class="dia-semana">${dia}</div>`).join('');

            // Calcular d√≠as vac√≠os al inicio (lunes = 0)
            let diaSemanaInicio = primerDia.getDay() - 1;
            if (diaSemanaInicio === -1) diaSemanaInicio = 6;

            // D√≠as del mes anterior
            const ultimoDiaMesAnterior = new Date(mesActual.getFullYear(), mesActual.getMonth(), 0);
            for (let i = diaSemanaInicio - 1; i >= 0; i--) {
                const dia = ultimoDiaMesAnterior.getDate() - i;
                html += `<div class="dia-celda dia-otro-mes"><span class="dia-numero">${dia}</span></div>`;
            }

            // D√≠as del mes actual
            const hoy = new Date();
            for (let dia = 1; dia <= ultimoDia.getDate(); dia++) {
                const fecha = new Date(mesActual.getFullYear(), mesActual.getMonth(), dia);
                const fechaStr = fecha.toISOString().split('T')[0];
                const esHoy = fecha.toDateString() === hoy.toDateString();

                // Generar indicadores de h√°bitos
                const indicadores = habitos.map(habito => {
                    if (habito.registros[fechaStr]) {
                        return `<div class="indicador-habito" style="background: ${habito.color};" title="${habito.nombre}"></div>`;
                    }
                    return '';
                }).join('');

                html += `
                    <div class="dia-celda ${esHoy ? 'dia-hoy' : ''}" onclick="abrirDiaDetalle('${fechaStr}')">
                        <span class="dia-numero">${dia}</span>
                        <div class="dia-indicadores">${indicadores}</div>
                    </div>
                `;
            }

            // Completar semana con d√≠as del siguiente mes
            const totalCeldas = html.match(/dia-celda/g).length;
            const celdasRestantes = 35 - totalCeldas;
            for (let i = 1; i <= celdasRestantes; i++) {
                html += `<div class="dia-celda dia-otro-mes"><span class="dia-numero">${i}</span></div>`;
            }

            grid.innerHTML = html;

            // Renderizar leyenda
            const leyenda = document.getElementById('calendarioLeyenda');
            leyenda.innerHTML = habitos.map(habito => `
                <div class="leyenda-item">
                    <div class="leyenda-color" style="background: ${habito.color};"></div>
                    <span>${habito.icono} ${habito.nombre}</span>
                </div>
            `).join('');
        }

        function cambiarMes(direccion) {
            mesActual.setMonth(mesActual.getMonth() + direccion);
            renderizarCalendario();
        }

        function abrirDiaDetalle(fechaStr) {
            const fecha = new Date(fechaStr + 'T00:00:00');
            const hoy = new Date();
            hoy.setHours(0, 0, 0, 0);

            if (fecha > hoy) {
                alert('No puedes marcar d√≠as futuros');
                return;
            }

            // Mostrar modal con checkboxes para cada h√°bito
            const habitosHtml = habitos.map(habito => {
                const marcado = habito.registros[fechaStr] || false;
                return `
                    <label style="display: flex; align-items: center; gap: 10px; padding: 10px; cursor: pointer; border-radius: 8px; transition: background 0.2s;"
                           onmouseover="this.style.background='var(--hover)'"
                           onmouseout="this.style.background='transparent'">
                        <input type="checkbox" ${marcado ? 'checked' : ''}
                               onchange="toggleDia('${habito.id}', new Date('${fechaStr}T00:00:00'))"
                               style="width: 20px; height: 20px; cursor: pointer;">
                        <div class="habito-color" style="background: ${habito.color};"></div>
                        <span style="flex: 1;">${habito.icono} ${habito.nombre}</span>
                    </label>
                `;
            }).join('');

            const fechaFormateada = fecha.toLocaleDateString('es-ES', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>${fechaFormateada}</h3>
                        <button class="modal-close" onclick="this.closest('.modal').remove()">‚úï</button>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 5px;">
                        ${habitosHtml || '<p style="text-align: center; color: var(--text-muted); padding: 20px;">No hay h√°bitos registrados</p>'}
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ==========================================
        // GR√ÅFICOS CON CHART.JS
        // ==========================================
        let chartTendencias, chartDistribucion;

        function renderizarGraficos() {
            renderizarGraficoTendencias();
            renderizarGraficoDistribucion();
        }

        function renderizarGraficoTendencias() {
            const ctx = document.getElementById('chartTendencias');
            if (!ctx) return;

            // Destruir gr√°fico anterior
            if (chartTendencias) {
                chartTendencias.destroy();
            }

            // Obtener √∫ltimas 4 semanas
            const hoy = new Date();
            const labels = [];
            const datasets = [];

            for (let i = 27; i >= 0; i--) {
                const fecha = new Date(hoy);
                fecha.setDate(fecha.getDate() - i);
                labels.push(fecha.toLocaleDateString('es-ES', { day: 'numeric', month: 'short' }));
            }

            habitos.forEach(habito => {
                const datos = [];
                for (let i = 27; i >= 0; i--) {
                    const fecha = new Date(hoy);
                    fecha.setDate(fecha.getDate() - i);
                    const fechaStr = fecha.toISOString().split('T')[0];
                    datos.push(habito.registros[fechaStr] ? 1 : 0);
                }

                datasets.push({
                    label: `${habito.icono} ${habito.nombre}`,
                    data: datos,
                    borderColor: habito.color,
                    backgroundColor: habito.color + '40',
                    tension: 0.4,
                    fill: true
                });
            });

            chartTendencias = new Chart(ctx, {
                type: 'line',
                data: { labels, datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Tendencia √∫ltimos 28 d√≠as',
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1,
                            ticks: {
                                callback: (value) => value === 1 ? '‚úì' : '‚úó'
                            }
                        }
                    }
                }
            });
        }

        function renderizarGraficoDistribucion() {
            const ctx = document.getElementById('chartDistribucion');
            if (!ctx) return;

            // Destruir gr√°fico anterior
            if (chartDistribucion) {
                chartDistribucion.destroy();
            }

            const labels = habitos.map(h => `${h.icono} ${h.nombre}`);
            const completados = habitos.map(h => Object.keys(h.registros).filter(f => h.registros[f]).length);
            const colores = habitos.map(h => h.color);

            chartDistribucion = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels,
                    datasets: [{
                        data: completados,
                        backgroundColor: colores,
                        borderWidth: 2,
                        borderColor: '#FFFFFF'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Distribuci√≥n de d√≠as completados',
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // ==========================================
        // SISTEMA DE LOGROS
        // ==========================================
        function renderizarLogros() {
            const grid = document.getElementById('logrosGrid');

            // Calcular logros desbloqueados
            const logrosDesbloqueados = new Set();
            habitos.forEach(habito => {
                const rachaActual = calcularRachaActual(habito);
                const mejorRacha = calcularMejorRacha(habito);

                logrosDisponibles.forEach(logro => {
                    if (mejorRacha >= logro.dias || rachaActual >= logro.dias) {
                        logrosDesbloqueados.add(logro.id);
                    }
                });
            });

            grid.innerHTML = logrosDisponibles.map(logro => {
                const desbloqueado = logrosDesbloqueados.has(logro.id);
                return `
                    <div class="logro-card ${desbloqueado ? 'desbloqueado' : 'bloqueado'}">
                        <div class="logro-icono">${logro.icono}</div>
                        <div class="logro-titulo">${logro.titulo}</div>
                        <div class="logro-descripcion">${logro.descripcion}</div>
                    </div>
                `;
            }).join('');
        }

        function verificarLogros(habitoId) {
            const habito = habitos.find(h => h.id === habitoId);
            if (!habito) return;

            const rachaActual = calcularRachaActual(habito);

            // Verificar si alcanz√≥ un logro
            const logroAlcanzado = logrosDisponibles.find(l => l.dias === rachaActual);
            if (logroAlcanzado) {
                mostrarCelebracion(logroAlcanzado, habito);
            }

            renderizarLogros();
        }

        function mostrarCelebracion(logro, habito) {
            document.getElementById('celebracionIcono').textContent = logro.icono;
            document.getElementById('celebracionTitulo').textContent = `¬°${logro.titulo}!`;
            document.getElementById('celebracionMensaje').textContent =
                `Has alcanzado ${logro.dias} d√≠as consecutivos en "${habito.nombre}". ¬°Sigue as√≠!`;

            abrirModal('modalCelebracion');

            // Auto-cerrar despu√©s de 5 segundos
            setTimeout(() => {
                cerrarModal('modalCelebracion');
            }, 5000);
        }

        // ==========================================
        // RECORDATORIOS
        // ==========================================
        function verificarRecordatorios() {
            const hoy = new Date().toISOString().split('T')[0];
            const habitosPendientes = habitos.filter(h => !h.registros[hoy]);

            if (habitosPendientes.length > 0 && habitos.length > 0) {
                const mensaje = document.createElement('div');
                mensaje.innerHTML = `
                    <div style="position: fixed; top: 80px; right: 20px; background: var(--primary); color: white;
                                padding: 15px 20px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.2);
                                z-index: 1500; max-width: 300px; animation: fadeIn 0.3s;">
                        <strong>üìå Recordatorio</strong><br>
                        Tienes ${habitosPendientes.length} h√°bito(s) pendiente(s) hoy.
                        <button onclick="this.parentElement.remove()"
                                style="background: rgba(255,255,255,0.2); border: none; color: white;
                                       padding: 5px 10px; border-radius: 6px; cursor: pointer; margin-top: 10px; width: 100%;">
                            Entendido
                        </button>
                    </div>
                `;
                document.body.appendChild(mensaje);

                // Auto-cerrar despu√©s de 10 segundos
                setTimeout(() => mensaje.remove(), 10000);
            }
        }

        // ==========================================
        // EXPORTACI√ìN E IMPORTACI√ìN
        // ==========================================
        function exportarRespaldo() {
            const datos = {
                habitos: habitos,
                version: '1.0',
                fecha: new Date().toISOString(),
                aplicacion: 'Seguimiento de H√°bitos - meskeIA'
            };

            const blob = new Blob([JSON.stringify(datos, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `respaldo-habitos-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            mostrarMensaje('‚úÖ Respaldo exportado correctamente');
        }

        function importarRespaldo(event) {
            const archivo = event.target.files[0];
            if (!archivo) return;

            const lector = new FileReader();
            lector.onload = (e) => {
                try {
                    const datos = JSON.parse(e.target.result);

                    if (!datos.habitos || !Array.isArray(datos.habitos)) {
                        throw new Error('Formato de archivo inv√°lido');
                    }

                    if (confirm('¬øDeseas reemplazar tus datos actuales con el respaldo? Esta acci√≥n no se puede deshacer.')) {
                        habitos = datos.habitos;
                        guardarDatos();
                        renderizarHabitos();
                        renderizarCalendario();
                        renderizarGraficos();
                        renderizarLogros();
                        mostrarMensaje('‚úÖ Respaldo importado correctamente');
                    }
                } catch (error) {
                    alert('Error al importar el archivo: ' + error.message);
                }
            };
            lector.readAsText(archivo);

            // Reset input
            event.target.value = '';
        }

        // ==========================================
        // UTILIDADES DE INTERFAZ
        // ==========================================
        function renderizarColores() {
            const grid = document.getElementById('coloresGrid');
            grid.innerHTML = coloresDisponibles.map(color => `
                <div class="color-option"
                     style="background: ${color};"
                     data-color="${color}"
                     onclick="seleccionarColor('${color}')">
                </div>
            `).join('');
        }

        function seleccionarColor(color) {
            document.getElementById('habitoColor').value = color;
            document.querySelectorAll('.color-option').forEach(el => {
                el.classList.toggle('selected', el.dataset.color === color);
            });
        }

        function abrirModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function cerrarModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function mostrarMensaje(texto) {
            const mensaje = document.createElement('div');
            mensaje.textContent = texto;
            mensaje.style.cssText = 'position: fixed; bottom: 70px; right: 20px; background: #2E86AB; color: white; padding: 12px 20px; border-radius: 8px; font-size: 0.95rem; font-family: inherit; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 9999; animation: fadeIn 0.3s;';
            document.body.appendChild(mensaje);
            setTimeout(() => {
                mensaje.style.animation = 'fadeOut 0.3s';
                setTimeout(() => mensaje.remove(), 300);
            }, 3000);
        }

        // Funci√≥n para compartir la aplicaci√≥n
        async function compartirApp() {
            const titulo = document.title;
            const url = window.location.href;
            const texto = '¬°Mira esta herramienta √∫til de meskeIA!';

            if (navigator.share) {
                try {
                    await navigator.share({ title: titulo, text: texto, url: url });
                    console.log('‚úÖ Compartido exitosamente');
                } catch (err) {
                    if (err.name !== 'AbortError') console.error('Error al compartir:', err);
                }
            } else {
                try {
                    await navigator.clipboard.writeText(url);
                    mostrarMensaje('‚úÖ Enlace copiado al portapapeles');
                } catch (err) {
                    prompt('Copia este enlace para compartir:', url);
                }
            }
        }
    </script>
</body>
</html>

name: ğŸ§ª Test FTP Deployment

on:
  push:
    paths:
      - 'test-ftp-deployment.txt'
  workflow_dispatch:

jobs:
  test-ftp:
    runs-on: ubuntu-latest
    name: Test FTP Connection
    
    steps:
    - name: ğŸ›ï¸ Checkout repository
      uses: actions/checkout@v4
      
    - name: ğŸ“ Show test file content
      run: |
        echo "=== Contenido del archivo de prueba ==="
        cat test-ftp-deployment.txt
        echo "=== Fin del archivo ==="
        
    - name: ğŸš€ Test FTP Upload with secret username
      uses: SamKirkland/FTP-Deploy-Action@v4.3.4
      with:
        server: ${{ secrets.FTP_SERVER }}
        username: ${{ secrets.FTP_USERNAME }}
        password: ${{ secrets.FTP_PASSWORD }}
        local-dir: ./
        server-dir: /public_html/meskeia.com/
        exclude: |
          **/.git*
          **/.git*/**
          **/node_modules/**
          **/.github/**
          **/.claude/**
          **/desktop.ini
          **/*
          !test-ftp-deployment.txt
        dry-run: false
        log-level: verbose
        
    - name: âœ… Success notification
      run: |
        echo "ğŸ‰ Test FTP deployment completed!"
        echo "Check https://meskeia.com/test-ftp-deployment.txt to verify upload"
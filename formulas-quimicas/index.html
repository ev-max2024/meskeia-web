<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="icon_meskeia.png">
    <title>Constructor de F√≥rmulas Qu√≠micas - meskeIA</title>
    <meta name="description" content="¬øNecesitas construir f√≥rmulas qu√≠micas correctamente? Arrastra iones y √°tomos con verificaci√≥n autom√°tica de valencias. Aprende qu√≠mica de forma interactiva.">
    <meta name="keywords" content="qu√≠mica, f√≥rmulas qu√≠micas, iones, valencias, educaci√≥n, meskeIA">

    <!-- Open Graph -->
    <meta property="og:title" content="Constructor de F√≥rmulas Qu√≠micas - meskeIA">
    <meta property="og:description" content="Aprende qu√≠mica construyendo f√≥rmulas de forma interactiva">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="es_ES">

    <!-- Bootstrap 5.3+ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">


    <!-- CSS personalizado -->
    <link rel="stylesheet" href="style.css">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#10b981">

</head>
<body>
    <!-- Logo meskeIA -->
    <div class="meskeia-logo-container" onclick="window.location.href='../index.html'" style="cursor: pointer;">
        <div class="meskeia-logo-icon">
            <div class="meskeia-neural-network">
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
            </div>
        </div>
        <div class="meskeia-logo-text">
            <span class="meske">meske</span><span class="ia">IA</span>
        </div>
    </div>

    <div class="container-fluid py-4">
        <div class="row">
            <div class="col-12">
                <header class="text-center mb-4">
                    <h1 class="display-4 mb-2">
                        <i class="bi bi-lightning-charge text-primary"></i>
                        Constructor de F√≥rmulas Qu√≠micas
                    </h1>
                    <p class="lead text-muted">
                        Haz clic en los elementos y forma compuestos qu√≠micos. ¬°Aprende valencias mientras juegas!
                    </p>
                </header>
            </div>
        </div>

        <div class="row g-4">
            <!-- Panel de elementos -->
            <div class="col-lg-3">
                <div class="card h-100 shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <i class="bi bi-grid-3x3-gap"></i>
                            Elementos Qu√≠micos
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Filtros -->
                        <div class="mb-3">
                            <select class="form-select form-select-sm" id="filtroTipo">
                                <option value="todos">Todos los elementos</option>
                                <option value="metales">Metales</option>
                                <option value="no-metales">No metales</option>
                                <option value="gases-nobles">Gases nobles</option>
                            </select>
                        </div>

                        <!-- Lista de elementos arrastrables -->
                        <div id="elementos-panel" class="elementos-grid">
                            <!-- Los elementos se generar√°n din√°micamente -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- √Årea de construcci√≥n -->
            <div class="col-lg-6">
                <div class="card h-100 shadow-sm">
                    <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="bi bi-hammer"></i>
                            √Årea de Construcci√≥n
                        </h5>
                        <div>
                            <button class="btn btn-outline-light btn-sm" id="limpiar-area">
                                <i class="bi bi-trash"></i>
                                Limpiar
                            </button>
                        </div>
                    </div>
                    <div class="card-body position-relative">
                        <div id="area-construccion" class="construction-area">
                            <div class="drop-zone" id="zona-reactivos">
                                <div class="drop-placeholder">
                                    <i class="bi bi-plus-circle-dotted fs-1 text-muted"></i>
                                    <p class="text-muted mt-2">Haz clic en los elementos para agregarlos</p>
                                </div>
                            </div>

                            <div class="reaction-arrow">
                                <i class="bi bi-arrow-right fs-2 text-primary"></i>
                            </div>

                            <div class="drop-zone" id="zona-producto">
                                <div class="product-display" id="formula-resultado">
                                    <span class="formula-placeholder">F√≥rmula</span>
                                </div>
                            </div>
                        </div>

                        <!-- Panel de informaci√≥n -->
                        <div class="info-panel mt-3" id="panel-info">
                            <div class="alert alert-info d-none" id="info-compuesto">
                                <h6 class="alert-heading">
                                    <i class="bi bi-info-circle"></i>
                                    Informaci√≥n del Compuesto
                                </h6>
                                <div id="info-contenido"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel de resultados y validaci√≥n -->
            <div class="col-lg-3">
                <div class="card h-100 shadow-sm">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">
                            <i class="bi bi-check2-circle"></i>
                            Validaci√≥n
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Estado de validaci√≥n -->
                        <div id="estado-validacion" class="mb-3">
                            <div class="alert alert-secondary">
                                <i class="bi bi-hourglass-split"></i>
                                Esperando f√≥rmula...
                            </div>
                        </div>

                        <!-- Informaci√≥n de valencia -->
                        <div class="mb-3">
                            <h6>Valencias Detectadas:</h6>
                            <div id="valencias-info" class="small text-muted">
                                Selecciona elementos para ver sus valencias
                            </div>
                        </div>

                        <!-- Tipo de enlace -->
                        <div class="mb-3">
                            <h6>Tipo de Enlace:</h6>
                            <div id="tipo-enlace" class="badge bg-secondary">
                                No determinado
                            </div>
                        </div>

                        <!-- F√≥rmulas comunes -->
                        <div class="mt-4">
                            <h6>F√≥rmulas Comunes:</h6>
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-primary btn-sm formula-common" data-formula="H2O">
                                    H‚ÇÇO - Agua
                                </button>
                                <button class="btn btn-outline-primary btn-sm formula-common" data-formula="NaCl">
                                    NaCl - Sal com√∫n
                                </button>
                                <button class="btn btn-outline-primary btn-sm formula-common" data-formula="CO2">
                                    CO‚ÇÇ - Di√≥xido de carbono
                                </button>
                                <button class="btn btn-outline-primary btn-sm formula-common" data-formula="CaCO3">
                                    CaCO‚ÇÉ - Carbonato de calcio
                                </button>
                                <button class="btn btn-outline-primary btn-sm formula-common" data-formula="H2SO4">
                                    H‚ÇÇSO‚ÇÑ - √Åcido sulf√∫rico
                                </button>
                            </div>
                        </div>

                        <!-- Historial -->
                        <div class="mt-4">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <h6 class="mb-0">Historial:</h6>
                                <button class="btn btn-outline-danger btn-sm" id="limpiar-historial">
                                    <i class="bi bi-trash"></i>
                                    Limpiar
                                </button>
                            </div>
                            <div id="historial-formulas" class="small">
                                <div class="text-muted">Tus f√≥rmulas aparecer√°n aqu√≠</div>
                            </div>
                        </div>

                        <!-- Ayuda -->
                        <div class="mt-4">
                            <button class="btn btn-outline-primary btn-sm w-100" type="button" data-bs-toggle="collapse" data-bs-target="#ayuda-panel">
                                <i class="bi bi-question-circle"></i>
                                Ayuda & FAQs
                            </button>
                            <div class="collapse mt-2" id="ayuda-panel">
                                <div class="card card-body small">
                                    <h6 class="text-primary">¬øC√≥mo usar?</h6>
                                    <p><strong>Paso 1:</strong> Haz clic o arrastra elementos qu√≠micos al √°rea de construcci√≥n</p>
                                    <p><strong>Paso 2:</strong> La f√≥rmula se genera autom√°ticamente</p>
                                    <p><strong>Paso 3:</strong> Observa la validaci√≥n y tipo de enlace</p>

                                    <h6 class="text-primary mt-3">Preguntas Frecuentes</h6>

                                    <details class="mb-2">
                                        <summary><strong>¬øPor qu√© no puedo arrastrar elementos?</strong></summary>
                                        <p>Puedes hacer <strong>clic directo</strong> en los elementos para agregarlos. El arrastre funciona en navegadores modernos.</p>
                                    </details>

                                    <details class="mb-2">
                                        <summary><strong>¬øC√≥mo limpio el √°rea?</strong></summary>
                                        <p>Usa el bot√≥n <strong>"Limpiar"</strong> en el √°rea de construcci√≥n o haz clic en las ‚úó de cada elemento.</p>
                                    </details>

                                    <details class="mb-2">
                                        <summary><strong>¬øQu√© significan los colores?</strong></summary>
                                        <p><span style="color: #3b82f6">üîµ Azul</span>: Metales | <span style="color: #ef4444">üî¥ Rojo</span>: No metales | <span style="color: #f59e0b">üü° Amarillo</span>: Gases nobles</p>
                                    </details>

                                    <details class="mb-2">
                                        <summary><strong>¬øLas f√≥rmulas son correctas?</strong></summary>
                                        <p>S√≠, usa algoritmos de <strong>balanceamiento</strong> basados en valencias qu√≠micas reales.</p>
                                    </details>

                                    <details class="mb-2">
                                        <summary><strong>¬øSe guarda mi progreso?</strong></summary>
                                        <p>S√≠, tus estad√≠sticas e historial se guardan <strong>localmente</strong> en tu dispositivo.</p>
                                    </details>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel de estad√≠sticas -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">
                            <i class="bi bi-graph-up"></i>
                            Estad√≠sticas de Aprendizaje
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <h3 class="text-primary mb-0" id="stat-formulas">0</h3>
                                    <small class="text-muted">F√≥rmulas creadas</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <h3 class="text-success mb-0" id="stat-correctas">0</h3>
                                    <small class="text-muted">Correctas</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <h3 class="text-warning mb-0" id="stat-tipos">0</h3>
                                    <small class="text-muted">Tipos diferentes</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-item">
                                    <h3 class="text-info mb-0" id="stat-elementos">0</h3>
                                    <small class="text-muted">Elementos usados</small>
                                </div>
                            </div>
                        </div>

                        <!-- Progreso visual -->
                        <div class="mt-3">
                            <div class="d-flex justify-content-between small mb-1">
                                <span>Progreso del aprendizaje</span>
                                <span id="progreso-porcentaje">0%</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar bg-gradient" id="barra-progreso" role="progressbar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Toast para notificaciones -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="toast-notificacion" class="toast" role="alert">
            <div class="toast-header">
                <i class="bi bi-bell-fill text-primary me-2"></i>
                <strong class="me-auto">Constructor Qu√≠mico</strong>
                <small class="text-muted">ahora</small>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toast-mensaje">
                Mensaje de notificaci√≥n
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>

    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "CLARITY_PROJECT_ID");
    </script>

    <!-- Footer meskeIA -->
    <footer style="position: fixed; bottom: 10px; right: 20px; color: #2d3748; font-size: 0.9rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: rgba(255, 255, 255, 0.9); padding: 5px 10px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        ¬© 2025 meskeIA
    </footer>
</body>
</html>
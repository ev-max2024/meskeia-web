<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Gastos Mensual | Gestor de Finanzas Personales - meskeIA</title>
    <meta name="description" content="¬øD√≥nde va tu dinero cada mes? Controla gastos e ingresos con categor√≠as visuales, balance autom√°tico y descarga de informes. 100% privado, sin registro, datos en tu navegador.">
    <meta name="keywords" content="control gastos, gestor finanzas personales, presupuesto mensual, balance ingresos gastos, categorias gastos, app finanzas gratis, control presupuesto, gastos mensuales, ahorro personal">
    <meta name="author" content="meskeIA">
    <meta name="robots" content="index, follow">
    <link rel="icon" type="image/png" href="../icon_meskeia.png">
    <link rel="canonical" href="https://meskeia.com/control-gastos-mensual/">

    <!-- Open Graph -->
    <meta property="og:title" content="Control de Gastos Mensual | Gestor de Finanzas Personales - meskeIA">
    <meta property="og:description" content="Controla tus gastos e ingresos mensuales. Gestiona tu presupuesto personal de forma simple, visual y privada.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://meskeia.com/control-gastos-mensual/">
    <meta property="og:image" content="https://meskeia.com/icon_meskeia.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Control de Gastos Mensual - meskeIA">
    <meta name="twitter:description" content="Gestiona tu presupuesto personal de forma simple y visual. 100% privado.">

    <!-- Schema.org WebApplication -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Control de Gastos Mensual",
        "description": "Aplicaci√≥n para gestionar gastos e ingresos mensuales, con categorizaci√≥n y balance visual",
        "url": "https://meskeia.com/control-gastos-mensual/",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "EUR"
        },
        "creator": {
            "@type": "Organization",
            "name": "meskeIA",
            "url": "https://meskeia.com"
        }
    }
    </script>

    <!-- Schema.org BreadcrumbList -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
            "@type": "ListItem",
            "position": 1,
            "name": "Inicio",
            "item": "https://meskeia.com/"
        },{
            "@type": "ListItem",
            "position": 2,
            "name": "Finanzas y Fiscalidad",
            "item": "https://meskeia.com/#finanzas-fiscalidad"
        },{
            "@type": "ListItem",
            "position": 3,
            "name": "Control de Gastos Mensual",
            "item": "https://meskeia.com/control-gastos-mensual/"
        }]
    }
    </script>

    <!-- Schema.org FAQPage -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [{
            "@type": "Question",
            "name": "¬øMis datos son privados?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "S√≠, completamente. Todos tus datos se guardan √∫nicamente en tu navegador usando localStorage. No se env√≠a ninguna informaci√≥n a servidores externos. Tienes control total de tu informaci√≥n financiera."
            }
        },{
            "@type": "Question",
            "name": "¬øPuedo usar la app sin conexi√≥n a internet?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "S√≠, funciona 100% offline. No requiere conexi√≥n a internet para registrar gastos, ver tu balance o consultar el historial."
            }
        },{
            "@type": "Question",
            "name": "¬øC√≥mo categorizo mis gastos?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Al a√±adir un gasto, seleccionas una categor√≠a de la lista predefinida: Vivienda, Alimentaci√≥n, Transporte, Salud, Ocio, Ropa, Suscripciones u Otros. Esto te permite analizar en qu√© gastas m√°s."
            }
        },{
            "@type": "Question",
            "name": "¬øPuedo exportar mis datos?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "S√≠, tienes 2 opciones: (1) Exportar el mes actual a CSV para Excel/Google Sheets, (2) Exportar TODO a JSON para backup completo de todos los meses. Tambi√©n puedes importar backups JSON para restaurar tus datos."
            }
        },{
            "@type": "Question",
            "name": "¬øC√≥mo hago backup de mis datos?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Usa el bot√≥n 'Exportar TODO a JSON' para descargar un backup completo con todos los meses y transacciones. Guarda este archivo en tu nube (Google Drive, Dropbox) y podr√°s restaurarlo con 'Importar desde JSON'."
            }
        }]
    }
    </script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SPPGLJBQ4Z"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-SPPGLJBQ4Z');
    </script>

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Logo meskeIA -->
    <div class="meskeia-logo-container" onclick="window.location.href='../index.html'" style="cursor: pointer;">
        <div class="meskeia-logo-icon">
            <div class="meskeia-neural-network">
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
            </div>
        </div>
        <div class="meskeia-logo-text">
            <span class="meske">meske</span><span class="ia">IA</span>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>üí∞ Control de Gastos Mensual</h1>
            <p class="subtitle">Gestiona tus finanzas personales de forma simple y visual</p>
        </header>

        <main>
            <!-- Resumen Principal -->
            <section class="summary-cards">
                <div class="summary-card income">
                    <div class="summary-icon">üìà</div>
                    <div class="summary-info">
                        <span class="summary-label">Ingresos</span>
                        <span class="summary-value" id="total-income">0,00 ‚Ç¨</span>
                    </div>
                </div>

                <div class="summary-card expense">
                    <div class="summary-icon">üìâ</div>
                    <div class="summary-info">
                        <span class="summary-label">Gastos</span>
                        <span class="summary-value" id="total-expenses">0,00 ‚Ç¨</span>
                    </div>
                </div>

                <div class="summary-card balance" id="balance-card">
                    <div class="summary-icon">üíµ</div>
                    <div class="summary-info">
                        <span class="summary-label">Balance</span>
                        <span class="summary-value" id="balance">0,00 ‚Ç¨</span>
                    </div>
                </div>
            </section>

            <!-- Selector de Mes -->
            <section class="card month-selector">
                <div class="month-controls">
                    <button onclick="changeMonth(-1)" class="btn-month">‚óÄ Mes Anterior</button>
                    <h2 id="current-month">Enero 2025</h2>
                    <button onclick="changeMonth(1)" class="btn-month">Mes Siguiente ‚ñ∂</button>
                </div>
            </section>

            <!-- A√±adir Transacci√≥n -->
            <section class="card">
                <h2>‚ûï Nueva Transacci√≥n</h2>

                <div class="transaction-type-selector">
                    <button class="type-btn active" id="btn-expense" onclick="setTransactionType('expense')">
                        üìâ Gasto
                    </button>
                    <button class="type-btn" id="btn-income" onclick="setTransactionType('income')">
                        üìà Ingreso
                    </button>
                </div>

                <form id="transaction-form" onsubmit="addTransaction(event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="amount">üí∂ Cantidad (‚Ç¨)</label>
                            <input type="number" id="amount" step="0.01" min="0.01" placeholder="0,00" required>
                        </div>

                        <div class="form-group" id="category-group">
                            <label for="category">üè∑Ô∏è Categor√≠a</label>
                            <select id="category" required>
                                <option value="">Seleccionar</option>
                                <option value="vivienda">üè† Vivienda</option>
                                <option value="alimentacion">üçî Alimentaci√≥n</option>
                                <option value="transporte">üöó Transporte</option>
                                <option value="salud">üíä Salud</option>
                                <option value="ocio">üé¨ Ocio</option>
                                <option value="ropa">üëï Ropa</option>
                                <option value="suscripciones">üì± Suscripciones</option>
                                <option value="otros">üí∞ Otros</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="date">üìÖ Fecha</label>
                            <input type="date" id="date" required>
                        </div>

                        <div class="form-group full-width">
                            <label for="description">üìù Descripci√≥n (opcional)</label>
                            <input type="text" id="description" placeholder="Ej: Compra supermercado, factura luz...">
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <span id="btn-text">üíæ A√±adir Gasto</span>
                    </button>
                </form>
            </section>

            <!-- Gr√°fico por Categor√≠as -->
            <section class="card" id="chart-section" style="display: none;">
                <h2>üìä Gastos por Categor√≠a</h2>
                <div id="chart-container">
                    <canvas id="expenses-chart"></canvas>
                </div>
                <div id="category-legend"></div>
            </section>

            <!-- Lista de Transacciones -->
            <section class="card">
                <div class="transactions-header">
                    <h2>üìú Transacciones del Mes</h2>
                    <div class="transactions-actions">
                        <button onclick="exportToCSV()" class="btn btn-secondary" id="export-btn" style="display: none;">
                            üì• CSV Mes Actual
                        </button>
                        <button onclick="clearAllTransactions()" class="btn btn-outline" id="clear-btn" style="display: none;">
                            üóëÔ∏è Limpiar Todo
                        </button>
                    </div>
                </div>

                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterTransactions('all')">Todas</button>
                    <button class="filter-btn" onclick="filterTransactions('income')">Ingresos</button>
                    <button class="filter-btn" onclick="filterTransactions('expense')">Gastos</button>
                </div>

                <div id="transactions-container">
                    <p class="empty-state">No hay transacciones este mes. A√±ade tu primera transacci√≥n arriba.</p>
                </div>
            </section>

            <!-- Backup y Restauraci√≥n -->
            <section class="card">
                <h2>üíæ Backup y Restauraci√≥n</h2>
                <p style="color: #666; margin-bottom: 20px;">Exporta todos tus datos para hacer backup o importa desde un archivo JSON para restaurar.</p>

                <div class="backup-actions">
                    <button onclick="exportAllToJSON()" class="btn btn-primary">
                        üì¶ Exportar TODO a JSON
                    </button>

                    <div class="import-section">
                        <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importFromJSON(event)">
                        <button onclick="document.getElementById('import-file').click()" class="btn btn-secondary">
                            üì• Importar desde JSON
                        </button>
                    </div>
                </div>

                <div class="backup-info">
                    <p><strong>üí° Exportar TODO a JSON:</strong> Descarga todos tus meses con todas las transacciones. Ideal para backup completo.</p>
                    <p><strong>üí° Importar desde JSON:</strong> Restaura un backup previo. Los datos actuales se fusionar√°n con los importados.</p>
                    <p><strong>üí° CSV Mes Actual:</strong> Descarga solo el mes actual en formato CSV para abrir en Excel.</p>
                </div>
            </section>

            <!-- Consejos de Ahorro -->
            <section class="card tips-section">
                <h2>üí° Consejos de Ahorro</h2>
                <div class="tips-grid">
                    <div class="tip">
                        <span class="tip-icon">üéØ</span>
                        <h3>Regla 50/30/20</h3>
                        <p>50% necesidades b√°sicas, 30% gastos personales, 20% ahorro e inversi√≥n</p>
                    </div>
                    <div class="tip">
                        <span class="tip-icon">üìä</span>
                        <h3>Revisa categor√≠as</h3>
                        <p>Identifica d√≥nde gastas m√°s y busca oportunidades de reducci√≥n</p>
                    </div>
                    <div class="tip">
                        <span class="tip-icon">üîÑ</span>
                        <h3>Registra diariamente</h3>
                        <p>A√±ade gastos cada d√≠a para no olvidar ninguno y tener control total</p>
                    </div>
                    <div class="tip">
                        <span class="tip-icon">üí≥</span>
                        <h3>Revisa suscripciones</h3>
                        <p>Cancela servicios que no uses. Peque√±os gastos mensuales suman mucho</p>
                    </div>
                    <div class="tip">
                        <span class="tip-icon">üéÅ</span>
                        <h3>Fondo de emergencia</h3>
                        <p>Ahorra 3-6 meses de gastos fijos para imprevistos</p>
                    </div>
                    <div class="tip">
                        <span class="tip-icon">üìÖ</span>
                        <h3>Planifica gastos grandes</h3>
                        <p>Vacaciones, regalos, reparaciones: prev√© y ahorra con antelaci√≥n</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Secciones Educativas meskeIA -->
    <style>
        .meskeia-edu-section {
            max-width: 800px;
            margin: 3rem auto 2rem;
            padding: 2rem;
            background: #FFFFFF;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(46, 134, 171, 0.1);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }
        .meskeia-edu-section h2 {
            color: #2E86AB;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #48A9A6;
            padding-bottom: 0.5rem;
        }
        .meskeia-edu-section p {
            color: #1A1A1A;
            margin-bottom: 1rem;
            font-size: 1rem;
        }
        .meskeia-edu-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .meskeia-edu-section li {
            padding: 0.75rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: #1A1A1A;
        }
        .meskeia-edu-section li:before {
            content: "‚Üí";
            color: #48A9A6;
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        .meskeia-edu-section strong {
            color: #2E86AB;
        }
        @media (max-width: 768px) {
            .meskeia-edu-section {
                margin: 2rem 1rem 1.5rem;
                padding: 1.5rem;
            }
            .meskeia-edu-section h2 {
                font-size: 1.25rem;
            }
        }
    </style>

    <div class="meskeia-edu-section">
        <h2>¬øC√≥mo funciona esta control gastos mensual?</h2>
        <p>Herramienta especializada en control gastos mensual. Proporciona c√°lculos y an√°lisis precisos para facilitar tu trabajo.</p>
        <ul>
            <li><strong>Funci√≥n principal</strong>: Realiza c√°lculos especializados de forma r√°pida</li>
            <li><strong>Interfaz intuitiva</strong>: Dise√±o simple y f√°cil de usar sin curva de aprendizaje</li>
            <li><strong>Resultados instant√°neos</strong>: Obt√©n respuestas al momento sin esperas</li>
            <li><strong>100% gratuito</strong>: Sin registro, sin l√≠mites, sin costos ocultos</li>
        </ul>
    </div>

    <div class="meskeia-edu-section">
        <h2>Casos de uso pr√°cticos</h2>
        <ul>
            <li><strong>Uso profesional</strong>: Aplica en tu trabajo diario para ahorrar tiempo</li>
            <li><strong>Estudios</strong>: Ayuda en tareas acad√©micas y proyectos</li>
            <li><strong>Vida cotidiana</strong>: Resuelve situaciones comunes del d√≠a a d√≠a</li>
            <li><strong>Toma de decisiones</strong>: Obt√©n datos precisos para decidir mejor</li>
        </ul>
    </div>

    <!-- Footer meskeIA -->
    <footer style="position: fixed; bottom: 10px; right: 20px; color: #2d3748; font-size: 0.9rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: rgba(255, 255, 255, 0.9); padding: 5px 10px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        ¬© 2025 meskeIA
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="script.js"></script>

    <!-- meskeIA Analytics - Tracking de uso -->
    <script>
        (async function() {
            const nombreApp = 'control-gastos-mensual';

            const datos = {
                aplicacion: nombreApp,
                navegador: navigator.userAgent,
                sistema_operativo: navigator.platform,
                resolucion: `${window.screen.width}x${window.screen.height}`
            };

            try {
                await fetch('https://meskeia.com/api/v1/guardar-uso.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(datos)
                });
                console.log('‚úÖ Uso registrado en meskeIA Analytics');
            } catch (error) {
                // Silencioso: no mostrar errores al usuario
                console.error('Error al registrar uso:', error);
            }
        })();
    </script>
</body>
</html>
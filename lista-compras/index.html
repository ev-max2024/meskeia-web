<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">
    <meta name="author" content="meskeIA">
    <meta name="theme-color" content="#2E86AB">

    <!-- SEO Principal -->
    <title>Lista de Compras Inteligente - Organizador de Supermercado | meskeIA</title>
    <meta name="description" content="¬øNecesitas organizar tu lista del supermercado? A√±ade productos con categor√≠as autom√°ticas, marca comprados y guarda tus listas. Funciona offline.">
    <meta name="keywords" content="lista compras, lista supermercado, organizador compras, lista productos, compra semanal, lista mercado, app compras, lista alimentos, planificador compras, lista groceries, supermercado online, lista offline, compras organizadas">

    <link rel="canonical" href="https://meskeia.com/lista-compras/">

    <!-- Open Graph para redes sociales -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Lista de Compras Inteligente - Organizador de Supermercado">
    <meta property="og:description" content="Organiza tu lista de compras por categor√≠as autom√°ticas. A√±ade productos, marca comprados y guarda tus listas offline.">
    <meta property="og:url" content="https://meskeia.com/lista-compras/">
    <meta property="og:site_name" content="meskeIA">
    <meta property="og:locale" content="es_ES">

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Lista de Compras Inteligente - meskeIA">
    <meta name="twitter:description" content="Organiza tu lista de compras por categor√≠as. Funciona offline con almacenamiento local.">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../icon_meskeia.png">
    <link rel="apple-touch-icon" href="../icon_meskeia.png">

    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Lista de Compras Inteligente",
        "description": "Aplicaci√≥n web para crear y organizar listas de compras con categorizaci√≥n autom√°tica por secciones del supermercado",
        "url": "https://meskeia.com/lista-compras/",
        "applicationCategory": "UtilityApplication",
        "operatingSystem": "Web Browser",
        "inLanguage": "es-ES",
        "author": {
            "@type": "Organization",
            "name": "meskeIA"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "EUR"
        },
        "featureList": [
            "A√±adir productos con cantidades y categor√≠as",
            "Organizaci√≥n autom√°tica por secciones del supermercado",
            "Marcar productos como comprados",
            "Guardar listas en almacenamiento local (offline)",
            "Exportar lista para compartir o imprimir",
            "Plantillas predefinidas para compras habituales"
        ]
    }
    </script>

    <!-- Breadcrumbs Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Inicio",
                "item": "https://meskeia.com"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Lista de Compras",
                "item": "https://meskeia.com/lista-compras/"
            }
        ]
    }
    </script>

    <style>
        :root {
            /* Paleta oficial meskeIA */
            --bg-primary: #FAFAFA;
            --bg-card: #FFFFFF;
            --primary: #2E86AB;
            --secondary: #48A9A6;
            --text-primary: #1A1A1A;
            --text-secondary: #666666;
            --text-muted: #999999;
            --border: #E5E5E5;
            --hover: #F5F5F5;
            --focus: rgba(46,134,171,0.1);
            --success: #4CAF50;
            --danger: #E53E3E;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 20px;
            padding-top: 80px;
            padding-bottom: 60px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 2rem;
        }

        .subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 30px;
            font-size: 1rem;
        }

        /* Card principal */
        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        /* Formulario de a√±adir producto */
        .add-product-form {
            display: grid;
            grid-template-columns: 2fr 1fr 2fr auto;
            gap: 10px;
            align-items: end;
            margin-bottom: 30px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 5px;
            color: var(--text-primary);
            font-weight: 500;
            font-size: 0.9rem;
        }

        input, select {
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--focus);
        }

        button {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(46,134,171,0.3);
        }

        button:active {
            transform: translateY(0);
        }

        .btn-add {
            background: var(--primary);
        }

        .btn-secondary {
            background: var(--text-secondary);
            font-size: 0.9rem;
            padding: 10px 20px;
        }

        .btn-danger {
            background: var(--danger);
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.85rem;
        }

        /* Botones de acci√≥n */
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        /* Categor√≠as */
        .category-section {
            margin-bottom: 20px;
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            background: var(--bg-card);
        }

        .category-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-header:hover {
            opacity: 0.9;
        }

        .category-title {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .category-count {
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.9rem;
        }

        .category-items {
            padding: 10px;
        }

        .category-items.collapsed {
            display: none;
        }

        /* Items de productos */
        .product-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 15px;
            border-bottom: 1px solid var(--border);
            transition: background 0.2s ease;
        }

        .product-item:last-child {
            border-bottom: none;
        }

        .product-item:hover {
            background: var(--hover);
        }

        .product-item.checked {
            opacity: 0.5;
        }

        .product-checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: var(--primary);
        }

        .product-info {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .product-name {
            font-weight: 500;
            color: var(--text-primary);
        }

        .product-item.checked .product-name {
            text-decoration: line-through;
        }

        .product-quantity {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .product-delete {
            background: var(--danger);
            padding: 6px 12px;
            font-size: 0.85rem;
        }

        /* Estado vac√≠o */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .empty-state-text {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        /* Estad√≠sticas */
        .stats {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: var(--focus);
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Responsive m√≥vil */
        @media (max-width: 768px) {
            body {
                padding: 15px;
                padding-top: 70px;
                padding-bottom: 50px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .add-product-form {
                grid-template-columns: 1fr;
            }

            .form-group button {
                width: 100%;
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-buttons button {
                width: 100%;
            }

            .stats {
                flex-direction: column;
                gap: 15px;
            }

            .product-item {
                flex-wrap: wrap;
            }

            .product-info {
                flex: 1 1 100%;
            }

            input, select, button {
                font-size: 16px; /* Evita zoom en iOS */
            }
        }

        /* Logo meskeIA - Componente oficial */
        .meskeia-logo-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(46, 134, 171, 0.2);
            border-radius: 12px;
            padding: 8px 16px;
            box-shadow: 0 4px 20px rgba(46, 134, 171, 0.1);
            transition: all 0.3s ease;
        }

        .meskeia-logo-container:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 25px rgba(46, 134, 171, 0.15);
        }

        .meskeia-logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #2E86AB 0%, #48A9A6 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .meskeia-logo-icon::before {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            top: 10px;
            left: 10px;
        }

        .meskeia-logo-icon::after {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            background: #2E86AB;
            border-radius: 50%;
            top: 13px;
            left: 13px;
        }

        .meskeia-neural-network {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0.3;
        }

        .meskeia-neural-dot {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
        }

        .meskeia-neural-dot:nth-child(1) { top: 4px; left: 6px; }
        .meskeia-neural-dot:nth-child(2) { top: 8px; right: 5px; }
        .meskeia-neural-dot:nth-child(3) { bottom: 6px; left: 4px; }
        .meskeia-neural-dot:nth-child(4) { bottom: 4px; right: 8px; }

        .meskeia-logo-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2C3E50;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .meskeia-logo-text .meske {
            color: #2E86AB;
        }

        .meskeia-logo-text .ia {
            color: #48A9A6;
            font-weight: 700;
            position: relative;
        }

        .meskeia-logo-text .ia::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #48A9A6, #7FB3D3);
            border-radius: 1px;
        }

        @media (max-width: 768px) {
            .meskeia-logo-container {
                top: 10px;
                left: 10px;
                padding: 6px 12px;
                gap: 8px;
            }

            .meskeia-logo-icon {
                width: 24px;
                height: 24px;
            }

            .meskeia-logo-icon::before {
                width: 9px;
                height: 9px;
                top: 7.5px;
                left: 7.5px;
            }

            .meskeia-logo-icon::after {
                width: 4px;
                height: 4px;
                top: 10px;
                left: 10px;
            }

            .meskeia-logo-text {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Logo meskeIA -->
    <div class="meskeia-logo-container" onclick="window.location.href='../index.html'" style="cursor: pointer;">
        <div class="meskeia-logo-icon">
            <div class="meskeia-neural-network">
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
                <div class="meskeia-neural-dot"></div>
            </div>
        </div>
        <div class="meskeia-logo-text">
            <span class="meske">meske</span><span class="ia">IA</span>
        </div>
    </div>

    <div class="container">
        <h1>üõí Lista de Compras Inteligente</h1>
        <p class="subtitle">Organiza tu lista por categor√≠as del supermercado</p>

        <!-- Estad√≠sticas -->
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="totalProducts">0</div>
                <div class="stat-label">Productos</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="checkedProducts">0</div>
                <div class="stat-label">Comprados</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="pendingProducts">0</div>
                <div class="stat-label">Pendientes</div>
            </div>
        </div>

        <!-- Formulario para a√±adir producto -->
        <div class="card">
            <form class="add-product-form" id="addProductForm">
                <div class="form-group">
                    <label for="productName">Producto:</label>
                    <input type="text" id="productName" placeholder="Ej: Manzanas" required>
                </div>
                <div class="form-group">
                    <label for="productQuantity">Cantidad:</label>
                    <input type="text" id="productQuantity" placeholder="Ej: 2 kg" required>
                </div>
                <div class="form-group">
                    <label for="productCategory">Categor√≠a:</label>
                    <select id="productCategory" required>
                        <option value="frutas">üçé Frutas y Verduras</option>
                        <option value="lacteos">ü•õ L√°cteos</option>
                        <option value="carnes">ü•© Carnes y Pescados</option>
                        <option value="panaderia">üçû Panader√≠a</option>
                        <option value="conservas">ü•´ Conservas</option>
                        <option value="congelados">üßä Congelados</option>
                        <option value="limpieza">üß¥ Limpieza</option>
                        <option value="higiene">üíä Higiene</option>
                        <option value="bebidas">üç∑ Bebidas</option>
                        <option value="otros">üç™ Otros</option>
                    </select>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn-add">+ A√±adir</button>
                </div>
            </form>
        </div>

        <!-- Botones de acci√≥n -->
        <div class="action-buttons">
            <button class="btn-secondary" onclick="exportList()">üìã Copiar Lista</button>
            <button class="btn-secondary" onclick="printList()">üñ®Ô∏è Imprimir</button>
            <button class="btn-danger btn-secondary" onclick="clearAll()">üóëÔ∏è Limpiar Todo</button>
        </div>

        <!-- Lista de productos por categor√≠as -->
        <div id="productList"></div>

        <!-- Estado vac√≠o -->
        <div id="emptyState" class="empty-state">
            <div class="empty-state-icon">üõí</div>
            <div class="empty-state-text">Tu lista est√° vac√≠a</div>
            <p>A√±ade productos para comenzar tu lista de compras</p>
        </div>
    </div>

    <!-- Secciones Educativas meskeIA -->
    <style>
        .meskeia-edu-section {
            max-width: 800px;
            margin: 3rem auto 2rem;
            padding: 2rem;
            background: #FFFFFF;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(46, 134, 171, 0.1);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }
        .meskeia-edu-section h2 {
            color: #2E86AB;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #48A9A6;
            padding-bottom: 0.5rem;
        }
        .meskeia-edu-section p {
            color: #1A1A1A;
            margin-bottom: 1rem;
            font-size: 1rem;
        }
        .meskeia-edu-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .meskeia-edu-section li {
            padding: 0.75rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: #1A1A1A;
        }
        .meskeia-edu-section li:before {
            content: "‚Üí";
            color: #48A9A6;
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        .meskeia-edu-section strong {
            color: #2E86AB;
        }
        @media (max-width: 768px) {
            .meskeia-edu-section {
                margin: 2rem 1rem 1.5rem;
                padding: 1.5rem;
            }
            .meskeia-edu-section h2 {
                font-size: 1.25rem;
            }
        }
    </style>

    <div class="meskeia-edu-section">
        <h2>¬øC√≥mo funciona esta lista compras?</h2>
        <p>Herramienta especializada en lista compras. Proporciona c√°lculos y an√°lisis precisos para facilitar tu trabajo.</p>
        <ul>
            <li><strong>Funci√≥n principal</strong>: Realiza c√°lculos especializados de forma r√°pida</li>
            <li><strong>Interfaz intuitiva</strong>: Dise√±o simple y f√°cil de usar sin curva de aprendizaje</li>
            <li><strong>Resultados instant√°neos</strong>: Obt√©n respuestas al momento sin esperas</li>
            <li><strong>100% gratuito</strong>: Sin registro, sin l√≠mites, sin costos ocultos</li>
        </ul>
    </div>

    <div class="meskeia-edu-section">
        <h2>Casos de uso pr√°cticos</h2>
        <ul>
            <li><strong>Uso profesional</strong>: Aplica en tu trabajo diario para ahorrar tiempo</li>
            <li><strong>Estudios</strong>: Ayuda en tareas acad√©micas y proyectos</li>
            <li><strong>Vida cotidiana</strong>: Resuelve situaciones comunes del d√≠a a d√≠a</li>
            <li><strong>Toma de decisiones</strong>: Obt√©n datos precisos para decidir mejor</li>
        </ul>
    </div>

    <!-- Footer meskeIA -->
    <footer style="position: fixed; bottom: 10px; right: 20px; color: #2d3748; font-size: 0.9rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: rgba(255, 255, 255, 0.9); padding: 5px 10px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        ¬© 2025 meskeIA
    </footer>

    <script>
        // Definici√≥n de categor√≠as con iconos
        const categories = {
            frutas: { name: 'Frutas y Verduras', icon: 'üçé' },
            lacteos: { name: 'L√°cteos', icon: 'ü•õ' },
            carnes: { name: 'Carnes y Pescados', icon: 'ü•©' },
            panaderia: { name: 'Panader√≠a', icon: 'üçû' },
            conservas: { name: 'Conservas', icon: 'ü•´' },
            congelados: { name: 'Congelados', icon: 'üßä' },
            limpieza: { name: 'Limpieza', icon: 'üß¥' },
            higiene: { name: 'Higiene', icon: 'üíä' },
            bebidas: { name: 'Bebidas', icon: 'üç∑' },
            otros: { name: 'Otros', icon: 'üç™' }
        };

        // Array de productos (se carga desde localStorage)
        let products = [];

        // Cargar productos desde localStorage al inicio
        function loadProducts() {
            const saved = localStorage.getItem('meskeIA_shopping_list');
            if (saved) {
                products = JSON.parse(saved);
            }
            renderProducts();
            updateStats();
        }

        // Guardar productos en localStorage
        function saveProducts() {
            localStorage.setItem('meskeIA_shopping_list', JSON.stringify(products));
        }

        // A√±adir nuevo producto
        document.getElementById('addProductForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const name = document.getElementById('productName').value.trim();
            const quantity = document.getElementById('productQuantity').value.trim();
            const category = document.getElementById('productCategory').value;

            if (name && quantity) {
                const product = {
                    id: Date.now(),
                    name: name,
                    quantity: quantity,
                    category: category,
                    checked: false
                };

                products.push(product);
                saveProducts();
                renderProducts();
                updateStats();

                // Limpiar formulario
                document.getElementById('productName').value = '';
                document.getElementById('productQuantity').value = '';
                document.getElementById('productName').focus();
            }
        });

        // Renderizar productos agrupados por categor√≠a
        function renderProducts() {
            const productList = document.getElementById('productList');
            const emptyState = document.getElementById('emptyState');

            if (products.length === 0) {
                productList.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';

            // Agrupar productos por categor√≠a
            const grouped = {};
            products.forEach(product => {
                if (!grouped[product.category]) {
                    grouped[product.category] = [];
                }
                grouped[product.category].push(product);
            });

            // Generar HTML por categor√≠a
            let html = '';
            Object.keys(categories).forEach(catKey => {
                const categoryProducts = grouped[catKey];
                if (categoryProducts && categoryProducts.length > 0) {
                    const category = categories[catKey];
                    const uncheckedCount = categoryProducts.filter(p => !p.checked).length;

                    html += `
                        <div class="category-section">
                            <div class="category-header" onclick="toggleCategory('${catKey}')">
                                <div class="category-title">
                                    <span>${category.icon}</span>
                                    <span>${category.name}</span>
                                </div>
                                <div class="category-count">${uncheckedCount}/${categoryProducts.length}</div>
                            </div>
                            <div class="category-items" id="category-${catKey}">
                    `;

                    categoryProducts.forEach(product => {
                        html += `
                            <div class="product-item ${product.checked ? 'checked' : ''}">
                                <input type="checkbox"
                                       class="product-checkbox"
                                       ${product.checked ? 'checked' : ''}
                                       onchange="toggleProduct(${product.id})">
                                <div class="product-info">
                                    <div class="product-name">${product.name}</div>
                                    <div class="product-quantity">${product.quantity}</div>
                                </div>
                                <button class="btn-small product-delete" onclick="deleteProduct(${product.id})">Eliminar</button>
                            </div>
                        `;
                    });

                    html += `
                            </div>
                        </div>
                    `;
                }
            });

            productList.innerHTML = html;
        }

        // Alternar categor√≠a (expandir/colapsar)
        function toggleCategory(categoryKey) {
            const categoryItems = document.getElementById(`category-${categoryKey}`);
            categoryItems.classList.toggle('collapsed');
        }

        // Marcar/desmarcar producto como comprado
        function toggleProduct(id) {
            const product = products.find(p => p.id === id);
            if (product) {
                product.checked = !product.checked;
                saveProducts();
                renderProducts();
                updateStats();
            }
        }

        // Eliminar producto
        function deleteProduct(id) {
            if (confirm('¬øEliminar este producto de la lista?')) {
                products = products.filter(p => p.id !== id);
                saveProducts();
                renderProducts();
                updateStats();
            }
        }

        // Actualizar estad√≠sticas
        function updateStats() {
            const total = products.length;
            const checked = products.filter(p => p.checked).length;
            const pending = total - checked;

            document.getElementById('totalProducts').textContent = total.toLocaleString('es-ES');
            document.getElementById('checkedProducts').textContent = checked.toLocaleString('es-ES');
            document.getElementById('pendingProducts').textContent = pending.toLocaleString('es-ES');
        }

        // Exportar lista al portapapeles
        function exportList() {
            if (products.length === 0) {
                alert('La lista est√° vac√≠a');
                return;
            }

            let text = 'üõí LISTA DE COMPRAS\n\n';

            // Agrupar por categor√≠a
            const grouped = {};
            products.forEach(product => {
                if (!grouped[product.category]) {
                    grouped[product.category] = [];
                }
                grouped[product.category].push(product);
            });

            // Generar texto
            Object.keys(categories).forEach(catKey => {
                const categoryProducts = grouped[catKey];
                if (categoryProducts && categoryProducts.length > 0) {
                    const category = categories[catKey];
                    text += `${category.icon} ${category.name.toUpperCase()}\n`;

                    categoryProducts.forEach(product => {
                        const status = product.checked ? '‚úì' : '‚òê';
                        text += `  ${status} ${product.name} - ${product.quantity}\n`;
                    });
                    text += '\n';
                }
            });

            text += `Total: ${products.length} productos\n`;
            text += `Generado con meskeIA - https://meskeia.com`;

            // Copiar al portapapeles
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ Lista copiada al portapapeles');
            }).catch(() => {
                alert('‚ùå Error al copiar. Int√©ntalo de nuevo.');
            });
        }

        // Imprimir lista
        function printList() {
            if (products.length === 0) {
                alert('La lista est√° vac√≠a');
                return;
            }

            window.print();
        }

        // Limpiar toda la lista
        function clearAll() {
            if (products.length === 0) {
                alert('La lista ya est√° vac√≠a');
                return;
            }

            if (confirm('¬øEst√°s seguro de que quieres eliminar TODA la lista?')) {
                products = [];
                saveProducts();
                renderProducts();
                updateStats();
            }
        }

        // Inicializar aplicaci√≥n
        window.onload = function() {
            loadProducts();
            document.getElementById('productName').focus();
        };
    </script>
</body>
</html>

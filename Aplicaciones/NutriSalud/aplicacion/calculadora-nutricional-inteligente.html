<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Nutricional Inteligente - NutriSalud</title>
    <link rel="icon" type="image/png" href="../assets/icon_meskeia.png">
    <style>
        :root {
            --primary: #2E86AB;
            --secondary: #A23B72;
            --accent: #F18F01;
            --bg-primary: #FFFFFF;
            --bg-secondary: #F8F9FA;
            --bg-card: #FFFFFF;
            --text-primary: #2D3748;
            --text-secondary: #4A5568;
            --text-muted: #718096;
            --border: #E2E8F0;
            --shadow: rgba(0, 0, 0, 0.1);
            --focus: rgba(46, 134, 171, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding-top: 80px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Logo meskeIA */
        .meskeia-logo-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 12px 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .meskeia-logo-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
        }

        .meskeia-neural-network {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 4px;
            width: 32px;
            height: 32px;
        }

        .meskeia-neural-dot {
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, #2E86AB, #A23B72);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        .meskeia-neural-dot:nth-child(2) { animation-delay: 0.5s; }
        .meskeia-neural-dot:nth-child(3) { animation-delay: 1s; }
        .meskeia-neural-dot:nth-child(4) { animation-delay: 1.5s; }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        .meskeia-logo-text {
            font-size: 1.4rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .meskeia-logo-text .meske {
            background: linear-gradient(135deg, #2E86AB, #A23B72);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .meskeia-logo-text .ia {
            color: #F18F01;
        }

        /* Navegaci√≥n breadcrumb */
        .breadcrumb {
            background: var(--bg-card);
            padding: 15px 0;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 999;
        }

        .breadcrumb-nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .breadcrumb-nav a {
            color: var(--primary);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .breadcrumb-nav a:hover {
            text-decoration: underline;
        }

        .breadcrumb-separator {
            margin: 0 10px;
            color: var(--text-muted);
        }

        /* Botones de navegaci√≥n */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .nav-btn {
            padding: 15px 30px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-align: center;
            flex: 1;
            max-width: 300px;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .nav-btn.secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .nav-btn.secondary:hover {
            background: #f8f9fa;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            font-size: 3em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }

        .header p {
            font-size: 1.2em;
            color: #555;
            max-width: 900px;
            margin: 0 auto;
        }

        .calculator-container {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .food-selector {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .food-selector h2 {
            color: #667eea;
            margin-bottom: 25px;
            font-size: 1.8em;
            text-align: center;
        }

        .meal-tabs {
            display: flex;
            margin-bottom: 25px;
            border-radius: 15px;
            background: #f1f3f4;
            padding: 5px;
        }

        .meal-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .meal-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .meal-tab:hover:not(.active) {
            background: #e9ecef;
        }

        .food-search {
            margin-bottom: 20px;
        }

        .food-search input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .food-search input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .food-categories {
            margin-bottom: 20px;
        }

        .category-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .category-btn {
            padding: 8px 15px;
            border: 2px solid #e0e6ed;
            border-radius: 20px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .category-btn.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .food-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
        }

        .food-item {
            padding: 12px 8px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            background: white;
        }

        .food-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .food-item.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .food-emoji {
            font-size: 1.5em;
            display: block;
            margin-bottom: 5px;
        }

        .selected-foods {
            margin-top: 25px;
        }

        .selected-foods h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .selected-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .selected-tag {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            position: relative;
            cursor: pointer;
        }

        .selected-tag::after {
            content: "√ó";
            margin-left: 8px;
            font-weight: bold;
        }

        .analysis-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .analysis-section h2 {
            color: #667eea;
            margin-bottom: 25px;
            font-size: 1.8em;
            text-align: center;
        }

        .meal-analysis {
            display: none;
        }

        .meal-analysis.active {
            display: block;
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .nutritional-summary {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .nutritional-summary h3 {
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .macro-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
        }

        .macro-item {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .macro-value {
            font-size: 1.3em;
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .macro-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .synergies-section {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .synergies-section h4 {
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .synergy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .synergy-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 15px;
        }

        .synergy-card strong {
            display: block;
            margin-bottom: 8px;
            color: #fff;
        }

        .warnings-section {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .warnings-section h4 {
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .warning-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .warning-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 15px;
        }

        .timing-section {
            background: linear-gradient(135deg, #a8e6cf, #56ab2f);
            color: #2d3436;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .timing-section h4 {
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .timing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .timing-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            padding: 15px;
        }

        .timing-card h5 {
            color: #27ae60;
            margin-bottom: 8px;
        }

        .score-section {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-bottom: 25px;
        }

        .score-section h4 {
            color: #d63031;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 2em;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: linear-gradient(135deg, #00b894, #55a3ff); }
        .score-good { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .score-fair { background: linear-gradient(135deg, #fd79a8, #fdcb6e); }
        .score-poor { background: linear-gradient(135deg, #ff6b6b, #ee5a24); }

        .daily-overview {
            margin-top: 30px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .daily-overview h2 {
            color: #667eea;
            margin-bottom: 25px;
            font-size: 1.8em;
            text-align: center;
        }

        .daily-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .daily-metric {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border-left: 5px solid #667eea;
        }

        .daily-metric h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .daily-metric .value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2d3436;
        }

        .recommendations {
            background: linear-gradient(135deg, #e17055, #74b9ff);
            color: white;
            border-radius: 15px;
            padding: 25px;
        }

        .recommendations h4 {
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .recommendation-list {
            list-style: none;
        }

        .recommendation-list li {
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
        }

        .recommendation-list li::before {
            content: "üí°";
            position: absolute;
            left: 0;
        }

        .clear-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }

        @media (max-width: 768px) {
            .calculator-container {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2em;
            }

            .meal-tabs {
                flex-direction: column;
            }

            .food-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Logo meskeIA -->
    <div class="meskeia-logo-container" onclick="window.location.href='../nutrisalud.html'" style="cursor: pointer;">
        <div class="meskeia-neural-network">
            <div class="meskeia-neural-dot"></div>
            <div class="meskeia-neural-dot"></div>
            <div class="meskeia-neural-dot"></div>
            <div class="meskeia-neural-dot"></div>
        </div>
        <div class="meskeia-logo-text">
            <span class="meske">meske</span><span class="ia">IA</span>
        </div>
    </div>

    <!-- Breadcrumb Navigation -->
    <nav class="breadcrumb">
        <div class="breadcrumb-nav">
            <a href="../nutrisalud.html">NutriSalud</a>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span>Aplicaci√≥n Pr√°ctica</span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span>Calculadora Nutricional Inteligente</span>
        </div>
    </nav>

    <div class="container">
        <div class="header">
            <h1>üßÆ Calculadora Nutricional Inteligente</h1>
            <p>Sistema completo que integra todo el conocimiento nutricional avanzado: analiza sinergias, detecta inhibiciones, optimiza timing y eval√∫a compatibilidades en tiempo real para maximizar la absorci√≥n de nutrientes y la salud org√°nica.</p>
        </div>

        <div class="calculator-container">
            <!-- Selector de Alimentos -->
            <div class="food-selector">
                <h2>üçΩÔ∏è Planifica tus Comidas</h2>
                
                <div class="meal-tabs">
                    <div class="meal-tab active" data-meal="breakfast">üåÖ Desayuno</div>
                    <div class="meal-tab" data-meal="lunch">‚òÄÔ∏è Almuerzo</div>
                    <div class="meal-tab" data-meal="dinner">üåô Cena</div>
                </div>

                <div class="food-search">
                    <input type="text" id="foodSearch" placeholder="Buscar alimentos...">
                </div>

                <div class="food-categories">
                    <div class="category-buttons">
                        <div class="category-btn active" data-category="all">Todos</div>
                        <div class="category-btn" data-category="proteins">Prote√≠nas</div>
                        <div class="category-btn" data-category="vegetables">Vegetales</div>
                        <div class="category-btn" data-category="fruits">Frutas</div>
                        <div class="category-btn" data-category="grains">Cereales</div>
                        <div class="category-btn" data-category="fats">Grasas</div>
                        <div class="category-btn" data-category="beverages">Bebidas</div>
                    </div>
                </div>

                <div class="food-grid" id="foodGrid">
                    <!-- Los alimentos se generan din√°micamente -->
                </div>

                <div class="selected-foods">
                    <h3>Alimentos seleccionados:</h3>
                    <div class="selected-list" id="selectedList">
                        <!-- Tags de alimentos seleccionados -->
                    </div>
                    <button class="clear-btn" onclick="clearMealSelection()">üóëÔ∏è Limpiar selecci√≥n</button>
                </div>
            </div>

            <!-- Secci√≥n de An√°lisis -->
            <div class="analysis-section">
                <h2>üìä An√°lisis Nutricional Inteligente</h2>
                
                <!-- An√°lisis por comida -->
                <div class="meal-analysis active" id="breakfast-analysis">
                    <div id="breakfast-content">
                        <p style="text-align: center; color: #666; font-style: italic; margin-top: 100px;">
                            Selecciona alimentos para tu desayuno para ver el an√°lisis nutricional completo con sinergias, inhibiciones y recomendaciones personalizadas.
                        </p>
                    </div>
                </div>

                <div class="meal-analysis" id="lunch-analysis">
                    <div id="lunch-content">
                        <p style="text-align: center; color: #666; font-style: italic; margin-top: 100px;">
                            Selecciona alimentos para tu almuerzo para ver el an√°lisis nutricional completo.
                        </p>
                    </div>
                </div>

                <div class="meal-analysis" id="dinner-analysis">
                    <div id="dinner-content">
                        <p style="text-align: center; color: #666; font-style: italic; margin-top: 100px;">
                            Selecciona alimentos para tu cena para ver el an√°lisis nutricional completo.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resumen Diario -->
        <div class="daily-overview">
            <h2>üìà Resumen Nutricional del D√≠a</h2>
            <div id="dailySummary">
                <p style="text-align: center; color: #666; font-style: italic;">
                    Agrega alimentos a tus comidas para ver el resumen nutricional completo del d√≠a con recomendaciones personalizadas.
                </p>
            </div>
        </div>
    </div>

    <script>
        // Base de datos de alimentos con informaci√≥n nutricional completa
        const foodDatabase = {
            // PROTE√çNAS
            "huevos": {
                name: "Huevos",
                category: "proteins",
                emoji: "ü•ö",
                nutrients: {
                    protein: 13,
                    fat: 11,
                    carbs: 1,
                    calories: 155,
                    iron: 1.2,
                    calcium: 50,
                    vitaminD: 2,
                    vitaminB12: 1.1,
                    choline: 250
                },
                benefits: ["Prote√≠na completa", "Colina para el cerebro", "Vitamina D"],
                timing: ["morning", "any"],
                synergies: ["vitamina_c", "hierro"],
                inhibitions: [],
                organSupport: ["brain", "muscle"]
            },
            "salmon": {
                name: "Salm√≥n",
                category: "proteins",
                emoji: "üêü",
                nutrients: {
                    protein: 25,
                    fat: 12,
                    carbs: 0,
                    calories: 206,
                    omega3: 2.3,
                    vitaminD: 11,
                    vitaminB12: 3.2
                },
                benefits: ["Omega-3 alto", "Prote√≠na completa", "Vitamina D"],
                timing: ["lunch", "dinner"],
                synergies: ["antioxidantes"],
                inhibitions: [],
                organSupport: ["heart", "brain"]
            },
            "pollo": {
                name: "Pollo",
                category: "proteins",
                emoji: "üêî",
                nutrients: {
                    protein: 23,
                    fat: 3,
                    carbs: 0,
                    calories: 165,
                    iron: 0.7,
                    zinc: 1.3
                },
                benefits: ["Prote√≠na magra", "Hierro hemo", "Zinc"],
                timing: ["lunch", "dinner"],
                synergies: ["vitamina_c"],
                inhibitions: [],
                organSupport: ["muscle"]
            },
            "yogur": {
                name: "Yogur Griego",
                category: "proteins",
                emoji: "ü•õ",
                nutrients: {
                    protein: 10,
                    fat: 4,
                    carbs: 4,
                    calories: 100,
                    calcium: 150,
                    probiotics: "high"
                },
                benefits: ["Probi√≥ticos", "Prote√≠na", "Calcio"],
                timing: ["morning", "snack"],
                synergies: ["fibra", "prebi√≥ticos"],
                inhibitions: [],
                organSupport: ["intestine", "bone"]
            },

            // VEGETALES
            "espinacas": {
                name: "Espinacas",
                category: "vegetables",
                emoji: "ü•¨",
                nutrients: {
                    protein: 3,
                    fat: 0,
                    carbs: 4,
                    calories: 23,
                    iron: 2.7,
                    vitaminC: 28,
                    folate: 194,
                    magnesium: 79
                },
                benefits: ["Hierro no-hemo", "Folato", "Magnesio"],
                timing: ["lunch", "dinner"],
                synergies: ["vitamina_c", "grasas"],
                inhibitions: ["calcio", "taninos"],
                organSupport: ["blood", "liver"]
            },
            "brocoli": {
                name: "Br√≥coli",
                category: "vegetables",
                emoji: "ü•¶",
                nutrients: {
                    protein: 3,
                    fat: 0,
                    carbs: 6,
                    calories: 34,
                    vitaminC: 89,
                    vitaminK: 102,
                    folate: 63,
                    fiber: 2.6
                },
                benefits: ["Vitamina C alta", "Fitoqu√≠micos", "Fibra"],
                timing: ["lunch", "dinner"],
                synergies: ["grasas", "hierro"],
                inhibitions: [],
                organSupport: ["liver", "immune"]
            },
            "tomate": {
                name: "Tomate",
                category: "vegetables",
                emoji: "üçÖ",
                nutrients: {
                    protein: 1,
                    fat: 0,
                    carbs: 4,
                    calories: 18,
                    vitaminC: 14,
                    lycopene: "high",
                    potassium: 237
                },
                benefits: ["Licopeno", "Vitamina C", "Potasio"],
                timing: ["lunch", "dinner"],
                synergies: ["grasas", "aceite_oliva"],
                inhibitions: [],
                organSupport: ["heart", "prostate"]
            },
            "zanahoria": {
                name: "Zanahoria",
                category: "vegetables",
                emoji: "ü•ï",
                nutrients: {
                    protein: 1,
                    fat: 0,
                    carbs: 10,
                    calories: 41,
                    betacarotene: "high",
                    fiber: 2.8
                },
                benefits: ["Beta-caroteno", "Fibra", "Vitamina A"],
                timing: ["lunch", "dinner"],
                synergies: ["grasas"],
                inhibitions: [],
                organSupport: ["eyes", "skin"]
            },

            // FRUTAS
            "arandanos": {
                name: "Ar√°ndanos",
                category: "fruits",
                emoji: "ü´ê",
                nutrients: {
                    protein: 1,
                    fat: 0,
                    carbs: 14,
                    calories: 57,
                    vitaminC: 10,
                    antioxidants: "very high",
                    fiber: 2.4
                },
                benefits: ["Antioxidantes alt√≠simos", "Neuroprotecci√≥n", "Fibra"],
                timing: ["morning", "snack"],
                synergies: ["grasas", "proteina"],
                inhibitions: [],
                organSupport: ["brain", "eyes"]
            },
            "naranja": {
                name: "Naranja",
                category: "fruits",
                emoji: "üçä",
                nutrients: {
                    protein: 1,
                    fat: 0,
                    carbs: 12,
                    calories: 47,
                    vitaminC: 53,
                    folate: 40,
                    fiber: 2.4
                },
                benefits: ["Vitamina C alt√≠sima", "Folato", "Fibra"],
                timing: ["morning", "snack"],
                synergies: ["hierro", "proteina"],
                inhibitions: [],
                organSupport: ["immune", "skin"]
            },
            "manzana": {
                name: "Manzana",
                category: "fruits",
                emoji: "üçé",
                nutrients: {
                    protein: 0,
                    fat: 0,
                    carbs: 14,
                    calories: 52,
                    fiber: 2.4,
                    quercetin: "high"
                },
                benefits: ["Fibra soluble", "Quercetina", "Saciedad"],
                timing: ["morning", "snack"],
                synergies: ["proteina", "grasas"],
                inhibitions: [],
                organSupport: ["intestine", "heart"]
            },
            "aguacate": {
                name: "Aguacate",
                category: "fruits",
                emoji: "ü•ë",
                nutrients: {
                    protein: 2,
                    fat: 15,
                    carbs: 9,
                    calories: 160,
                    fiber: 7,
                    potassium: 485,
                    vitaminK: 21
                },
                benefits: ["Grasas monoinsaturadas", "Fibra alta", "Potasio"],
                timing: ["morning", "lunch"],
                synergies: ["carotenoides", "vitaminas_liposolubles"],
                inhibitions: [],
                organSupport: ["heart", "skin"]
            },

            // CEREALES Y GRANOS
            "avena": {
                name: "Avena",
                category: "grains",
                emoji: "üåæ",
                nutrients: {
                    protein: 17,
                    fat: 7,
                    carbs: 66,
                    calories: 389,
                    fiber: 11,
                    betaglucan: "high",
                    magnesium: 177
                },
                benefits: ["Beta-glucano", "Prote√≠na vegetal", "Fibra soluble"],
                timing: ["morning"],
                synergies: ["frutas", "frutos_secos"],
                inhibitions: ["hierro"],
                organSupport: ["heart", "intestine"]
            },
            "quinoa": {
                name: "Quinoa",
                category: "grains",
                emoji: "üå∞",
                nutrients: {
                    protein: 14,
                    fat: 6,
                    carbs: 64,
                    calories: 368,
                    fiber: 7,
                    iron: 4.6,
                    magnesium: 197
                },
                benefits: ["Prote√≠na completa", "Sin gluten", "Hierro alto"],
                timing: ["lunch", "dinner"],
                synergies: ["vitamina_c", "legumbres"],
                inhibitions: [],
                organSupport: ["muscle", "blood"]
            },
            "arroz_integral": {
                name: "Arroz Integral",
                category: "grains",
                emoji: "üçö",
                nutrients: {
                    protein: 8,
                    fat: 3,
                    carbs: 77,
                    calories: 370,
                    fiber: 4,
                    magnesium: 143
                },
                benefits: ["Carbohidratos complejos", "Fibra", "Magnesio"],
                timing: ["lunch", "dinner"],
                synergies: ["legumbres", "proteinas"],
                inhibitions: [],
                organSupport: ["energy", "intestine"]
            },

            // GRASAS
            "aceite_oliva": {
                name: "Aceite de Oliva",
                category: "fats",
                emoji: "ü´í",
                nutrients: {
                    protein: 0,
                    fat: 100,
                    carbs: 0,
                    calories: 884,
                    vitaminE: 14,
                    antioxidants: "high"
                },
                benefits: ["Antioxidantes", "Vitamina E", "Grasas monoinsaturadas"],
                timing: ["lunch", "dinner"],
                synergies: ["carotenoides", "vitaminas_liposolubles"],
                inhibitions: [],
                organSupport: ["heart", "brain"]
            },
            "nueces": {
                name: "Nueces",
                category: "fats",
                emoji: "ü•ú",
                nutrients: {
                    protein: 15,
                    fat: 65,
                    carbs: 14,
                    calories: 654,
                    omega3: 9,
                    vitaminE: 2.9,
                    magnesium: 158
                },
                benefits: ["Omega-3 vegetal", "Vitamina E", "Magnesio"],
                timing: ["morning", "snack"],
                synergies: ["antioxidantes"],
                inhibitions: [],
                organSupport: ["brain", "heart"]
            },
            "almendras": {
                name: "Almendras",
                category: "fats",
                emoji: "üå∞",
                nutrients: {
                    protein: 21,
                    fat: 50,
                    carbs: 22,
                    calories: 579,
                    vitaminE: 25,
                    calcium: 269,
                    magnesium: 270
                },
                benefits: ["Vitamina E alt√≠sima", "Calcio vegetal", "Magnesio"],
                timing: ["morning", "snack"],
                synergies: ["vitamina_d"],
                inhibitions: ["hierro"],
                organSupport: ["bone", "skin"]
            },

            // LEGUMBRES
            "lentejas": {
                name: "Lentejas",
                category: "proteins",
                emoji: "ü´ò",
                nutrients: {
                    protein: 26,
                    fat: 1,
                    carbs: 60,
                    calories: 352,
                    iron: 7.5,
                    folate: 479,
                    fiber: 11
                },
                benefits: ["Hierro vegetal alto", "Folato", "Prote√≠na vegetal"],
                timing: ["lunch", "dinner"],
                synergies: ["vitamina_c", "cereales"],
                inhibitions: ["taninos", "calcio"],
                organSupport: ["blood", "muscle"]
            },

            // BEBIDAS
            "te_verde": {
                name: "T√© Verde",
                category: "beverages",
                emoji: "üçµ",
                nutrients: {
                    protein: 0,
                    fat: 0,
                    carbs: 0,
                    calories: 2,
                    antioxidants: "very high",
                    caffeine: 25
                },
                benefits: ["Antioxidantes EGCG", "Metabolismo", "Neuroprotecci√≥n"],
                timing: ["morning", "afternoon"],
                synergies: [],
                inhibitions: ["hierro", "calcio"],
                organSupport: ["brain", "liver"]
            },
            "cafe": {
                name: "Caf√©",
                category: "beverages",
                emoji: "‚òï",
                nutrients: {
                    protein: 0,
                    fat: 0,
                    carbs: 1,
                    calories: 2,
                    caffeine: 95,
                    antioxidants: "high"
                },
                benefits: ["Antioxidantes", "Energ√≠a", "Concentraci√≥n"],
                timing: ["morning"],
                synergies: [],
                inhibitions: ["hierro", "calcio", "zinc"],
                organSupport: ["brain", "liver"]
            },
            "agua": {
                name: "Agua",
                category: "beverages",
                emoji: "üíß",
                nutrients: {
                    protein: 0,
                    fat: 0,
                    carbs: 0,
                    calories: 0
                },
                benefits: ["Hidrataci√≥n", "Transporte nutrientes", "Detoxificaci√≥n"],
                timing: ["any"],
                synergies: ["all"],
                inhibitions: [],
                organSupport: ["kidney", "all"]
            }
        };

        // Estado global de la aplicaci√≥n
        let currentMeal = 'breakfast';
        let selectedFoods = {
            breakfast: [],
            lunch: [],
            dinner: []
        };
        let currentCategory = 'all';

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            initializeFoodGrid();
            initializeEventListeners();
        });

        function initializeEventListeners() {
            // Tabs de comidas
            document.querySelectorAll('.meal-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    currentMeal = this.dataset.meal;
                    updateMealTabs();
                    updateSelectedFoodsList();
                    updateAnalysis();
                });
            });

            // Botones de categor√≠as
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    currentCategory = this.dataset.category;
                    updateCategoryButtons();
                    filterFoodGrid();
                });
            });

            // B√∫squeda de alimentos
            document.getElementById('foodSearch').addEventListener('input', function() {
                filterFoodGrid(this.value.toLowerCase());
            });
        }

        function initializeFoodGrid() {
            const foodGrid = document.getElementById('foodGrid');
            foodGrid.innerHTML = '';

            Object.entries(foodDatabase).forEach(([key, food]) => {
                const foodItem = document.createElement('div');
                foodItem.className = 'food-item';
                foodItem.dataset.foodKey = key;
                foodItem.dataset.category = food.category;
                
                foodItem.innerHTML = `
                    <span class="food-emoji">${food.emoji}</span>
                    <span>${food.name}</span>
                `;

                foodItem.addEventListener('click', () => toggleFoodSelection(key));
                foodGrid.appendChild(foodItem);
            });
        }

        function updateMealTabs() {
            document.querySelectorAll('.meal-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-meal="${currentMeal}"]`).classList.add('active');

            document.querySelectorAll('.meal-analysis').forEach(analysis => {
                analysis.classList.remove('active');
            });
            document.getElementById(`${currentMeal}-analysis`).classList.add('active');

            updateFoodSelectionDisplay();
        }

        function updateCategoryButtons() {
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-category="${currentCategory}"]`).classList.add('active');
        }

        function filterFoodGrid(searchTerm = '') {
            const foodItems = document.querySelectorAll('.food-item');
            
            foodItems.forEach(item => {
                const foodKey = item.dataset.foodKey;
                const food = foodDatabase[foodKey];
                const matchesCategory = currentCategory === 'all' || food.category === currentCategory;
                const matchesSearch = searchTerm === '' || food.name.toLowerCase().includes(searchTerm);
                
                item.style.display = matchesCategory && matchesSearch ? 'block' : 'none';
            });
        }

        function toggleFoodSelection(foodKey) {
            const foodArray = selectedFoods[currentMeal];
            const index = foodArray.indexOf(foodKey);
            
            if (index > -1) {
                foodArray.splice(index, 1);
            } else {
                foodArray.push(foodKey);
            }
            
            updateFoodSelectionDisplay();
            updateSelectedFoodsList();
            updateAnalysis();
            updateDailySummary();
        }

        function updateFoodSelectionDisplay() {
            document.querySelectorAll('.food-item').forEach(item => {
                const foodKey = item.dataset.foodKey;
                const isSelected = selectedFoods[currentMeal].includes(foodKey);
                item.classList.toggle('selected', isSelected);
            });
        }

        function updateSelectedFoodsList() {
            const selectedList = document.getElementById('selectedList');
            const mealFoods = selectedFoods[currentMeal];
            
            selectedList.innerHTML = '';
            
            mealFoods.forEach(foodKey => {
                const food = foodDatabase[foodKey];
                const tag = document.createElement('div');
                tag.className = 'selected-tag';
                tag.textContent = food.name;
                tag.addEventListener('click', () => toggleFoodSelection(foodKey));
                selectedList.appendChild(tag);
            });
        }

        function updateAnalysis() {
            const mealFoods = selectedFoods[currentMeal];
            const contentDiv = document.getElementById(`${currentMeal}-content`);
            
            if (mealFoods.length === 0) {
                contentDiv.innerHTML = `
                    <p style="text-align: center; color: #666; font-style: italic; margin-top: 100px;">
                        Selecciona alimentos para tu ${getMealName(currentMeal)} para ver el an√°lisis nutricional completo.
                    </p>
                `;
                return;
            }

            const analysis = analyzeMealNutrition(mealFoods);
            
            contentDiv.innerHTML = `
                ${generateNutritionalSummary(analysis)}
                ${generateSynergiesSection(analysis)}
                ${generateWarningsSection(analysis)}
                ${generateTimingSection(analysis)}
                ${generateScoreSection(analysis)}
            `;
        }

        function analyzeMealNutrition(foodKeys) {
            const foods = foodKeys.map(key => ({ key, ...foodDatabase[key] }));
            
            const totals = {
                calories: 0,
                protein: 0,
                carbs: 0,
                fat: 0,
                fiber: 0,
                iron: 0,
                calcium: 0,
                vitaminC: 0
            };

            // Calcular totales nutricionales
            foods.forEach(food => {
                Object.keys(totals).forEach(nutrient => {
                    if (food.nutrients[nutrient]) {
                        totals[nutrient] += food.nutrients[nutrient];
                    }
                });
            });

            // Detectar sinergias
            const synergies = detectSynergies(foods);
            
            // Detectar inhibiciones
            const warnings = detectInhibitions(foods);
            
            // Evaluar timing
            const timingAnalysis = analyzeTimingOptimization(foods, currentMeal);
            
            // Calcular puntuaci√≥n
            const score = calculateMealScore(foods, synergies, warnings, timingAnalysis);

            return {
                foods,
                totals,
                synergies,
                warnings,
                timingAnalysis,
                score
            };
        }

        function detectSynergies(foods) {
            const synergies = [];
            
            // Hierro + Vitamina C
            const ironFoods = foods.filter(f => f.nutrients.iron > 0);
            const vitaminCFoods = foods.filter(f => f.nutrients.vitaminC > 0);
            if (ironFoods.length > 0 && vitaminCFoods.length > 0) {
                synergies.push({
                    type: "Hierro + Vitamina C",
                    foods: [...ironFoods.map(f => f.name), ...vitaminCFoods.map(f => f.name)],
                    benefit: "Aumenta absorci√≥n de hierro hasta 400%"
                });
            }

            // Carotenoides + Grasas
            const carotenoideFoods = foods.filter(f => 
                f.nutrients.betacarotene === "high" || f.nutrients.lycopene === "high"
            );
            const fatFoods = foods.filter(f => f.nutrients.fat > 5);
            if (carotenoideFoods.length > 0 && fatFoods.length > 0) {
                synergies.push({
                    type: "Carotenoides + Grasas",
                    foods: [...carotenoideFoods.map(f => f.name), ...fatFoods.map(f => f.name)],
                    benefit: "Mejora absorci√≥n de vitaminas liposolubles"
                });
            }

            // Calcio + Vitamina D
            const calciumFoods = foods.filter(f => f.nutrients.calcium > 0);
            const vitaminDFoods = foods.filter(f => f.nutrients.vitaminD > 0);
            if (calciumFoods.length > 0 && vitaminDFoods.length > 0) {
                synergies.push({
                    type: "Calcio + Vitamina D",
                    foods: [...calciumFoods.map(f => f.name), ...vitaminDFoods.map(f => f.name)],
                    benefit: "Optimiza absorci√≥n √≥sea y funci√≥n muscular"
                });
            }

            // Probi√≥ticos + Fibra
            const probioticFoods = foods.filter(f => f.nutrients.probiotics);
            const fiberFoods = foods.filter(f => f.nutrients.fiber > 3);
            if (probioticFoods.length > 0 && fiberFoods.length > 0) {
                synergies.push({
                    type: "Probi√≥ticos + Fibra",
                    foods: [...probioticFoods.map(f => f.name), ...fiberFoods.map(f => f.name)],
                    benefit: "Alimenta microbiota beneficiosa"
                });
            }

            return synergies;
        }

        function detectInhibitions(foods) {
            const warnings = [];
            
            // Caf√©/T√© con alimentos ricos en hierro
            const caffeineFoods = foods.filter(f => f.nutrients.caffeine > 0);
            const ironFoods = foods.filter(f => f.nutrients.iron > 1);
            if (caffeineFoods.length > 0 && ironFoods.length > 0) {
                warnings.push({
                    type: "Cafe√≠na inhibe hierro",
                    foods: [...caffeineFoods.map(f => f.name), ...ironFoods.map(f => f.name)],
                    impact: "Reduce absorci√≥n de hierro hasta 95%",
                    suggestion: "Separar el caf√©/t√© de comidas principales por 1-2 horas"
                });
            }

            // Calcio con hierro
            const highCalciumFoods = foods.filter(f => f.nutrients.calcium > 100);
            if (highCalciumFoods.length > 0 && ironFoods.length > 0) {
                warnings.push({
                    type: "Calcio inhibe hierro",
                    foods: [...highCalciumFoods.map(f => f.name), ...ironFoods.map(f => f.name)],
                    impact: "Compiten por la misma v√≠a de absorci√≥n",
                    suggestion: "Separar fuentes ricas en calcio e hierro"
                });
            }

            // Fibra excesiva
            const totalFiber = foods.reduce((sum, f) => sum + (f.nutrients.fiber || 0), 0);
            if (totalFiber > 15) {
                warnings.push({
                    type: "Fibra excesiva en una comida",
                    foods: foods.filter(f => f.nutrients.fiber > 3).map(f => f.name),
                    impact: "Puede causar molestias digestivas",
                    suggestion: "Distribuir la fibra a lo largo del d√≠a"
                });
            }

            return warnings;
        }

        function analyzeTimingOptimization(foods, meal) {
            const recommendations = [];
            
            // An√°lisis espec√≠fico por comida
            if (meal === 'breakfast') {
                const proteinFoods = foods.filter(f => f.nutrients.protein > 10);
                if (proteinFoods.length === 0) {
                    recommendations.push({
                        type: "Prote√≠na en desayuno",
                        suggestion: "A√±adir prote√≠na para estabilizar glucemia matutina"
                    });
                }
            }

            if (meal === 'dinner') {
                const highCarbFoods = foods.filter(f => f.nutrients.carbs > 20);
                if (highCarbFoods.length > 0) {
                    recommendations.push({
                        type: "Carbohidratos en cena",
                        suggestion: "Los carbohidratos pueden ayudar con la producci√≥n de serotonina para el sue√±o"
                    });
                }

                const caffeineFoods = foods.filter(f => f.nutrients.caffeine > 0);
                if (caffeineFoods.length > 0) {
                    recommendations.push({
                        type: "Cafe√≠na nocturna",
                        suggestion: "Evitar cafe√≠na 6-8 horas antes de dormir"
                    });
                }
            }

            return recommendations;
        }

        function calculateMealScore(foods, synergies, warnings, timingAnalysis) {
            let score = 70; // Base score

            // Bonificaciones por sinergias
            score += synergies.length * 10;

            // Penalizaciones por inhibiciones
            score -= warnings.length * 15;

            // Bonificaci√≥n por variedad nutricional
            const categories = new Set(foods.map(f => f.category));
            score += categories.size * 5;

            // Bonificaci√≥n por densidad nutricional
            const avgCaloriesPerFood = foods.reduce((sum, f) => sum + f.nutrients.calories, 0) / foods.length;
            if (avgCaloriesPerFood < 200) score += 10;

            return Math.max(0, Math.min(100, score));
        }

        function generateNutritionalSummary(analysis) {
            return `
                <div class="nutritional-summary">
                    <h3>üìä Resumen Nutricional</h3>
                    <div class="macro-grid">
                        <div class="macro-item">
                            <span class="macro-value">${Math.round(analysis.totals.calories)}</span>
                            <span class="macro-label">Calor√≠as</span>
                        </div>
                        <div class="macro-item">
                            <span class="macro-value">${Math.round(analysis.totals.protein)}g</span>
                            <span class="macro-label">Prote√≠na</span>
                        </div>
                        <div class="macro-item">
                            <span class="macro-value">${Math.round(analysis.totals.carbs)}g</span>
                            <span class="macro-label">Carbohidratos</span>
                        </div>
                        <div class="macro-item">
                            <span class="macro-value">${Math.round(analysis.totals.fat)}g</span>
                            <span class="macro-label">Grasas</span>
                        </div>
                        <div class="macro-item">
                            <span class="macro-value">${Math.round(analysis.totals.fiber)}g</span>
                            <span class="macro-label">Fibra</span>
                        </div>
                        <div class="macro-item">
                            <span class="macro-value">${Math.round(analysis.totals.iron)}mg</span>
                            <span class="macro-label">Hierro</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateSynergiesSection(analysis) {
            if (analysis.synergies.length === 0) return '';
            
            return `
                <div class="synergies-section">
                    <h4>‚ö° Sinergias Detectadas</h4>
                    <div class="synergy-grid">
                        ${analysis.synergies.map(synergy => `
                            <div class="synergy-card">
                                <strong>${synergy.type}</strong>
                                <div>Alimentos: ${synergy.foods.join(', ')}</div>
                                <div style="font-size: 0.9em; margin-top: 8px; opacity: 0.9;">${synergy.benefit}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function generateWarningsSection(analysis) {
            if (analysis.warnings.length === 0) return '';
            
            return `
                <div class="warnings-section">
                    <h4>‚ö†Ô∏è Advertencias Nutricionales</h4>
                    <div class="warning-grid">
                        ${analysis.warnings.map(warning => `
                            <div class="warning-card">
                                <strong>${warning.type}</strong>
                                <div style="margin-top: 8px;">Afecta: ${warning.foods.join(', ')}</div>
                                <div style="margin-top: 5px; font-size: 0.9em; opacity: 0.9;">üí° ${warning.suggestion}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function generateTimingSection(analysis) {
            if (analysis.timingAnalysis.length === 0) return '';
            
            return `
                <div class="timing-section">
                    <h4>‚è∞ Optimizaci√≥n de Timing</h4>
                    <div class="timing-grid">
                        ${analysis.timingAnalysis.map(timing => `
                            <div class="timing-card">
                                <h5>${timing.type}</h5>
                                <div>${timing.suggestion}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function generateScoreSection(analysis) {
            const score = analysis.score;
            let scoreClass, scoreText, scoreColor;
            
            if (score >= 85) {
                scoreClass = 'score-excellent';
                scoreText = 'Excelente';
                scoreColor = '#00b894';
            } else if (score >= 70) {
                scoreClass = 'score-good';
                scoreText = 'Bueno';
                scoreColor = '#fdcb6e';
            } else if (score >= 50) {
                scoreClass = 'score-fair';
                scoreText = 'Regular';
                scoreColor = '#fd79a8';
            } else {
                scoreClass = 'score-poor';
                scoreText = 'Mejorable';
                scoreColor = '#ff6b6b';
            }

            return `
                <div class="score-section">
                    <h4>üéØ Puntuaci√≥n Nutricional</h4>
                    <div class="score-circle ${scoreClass}">
                        ${score}/100
                    </div>
                    <div style="font-size: 1.2em; font-weight: bold; color: ${scoreColor};">
                        ${scoreText}
                    </div>
                </div>
            `;
        }

        function updateDailySummary() {
            const allFoods = [
                ...selectedFoods.breakfast,
                ...selectedFoods.lunch,
                ...selectedFoods.dinner
            ];

            if (allFoods.length === 0) {
                document.getElementById('dailySummary').innerHTML = `
                    <p style="text-align: center; color: #666; font-style: italic;">
                        Agrega alimentos a tus comidas para ver el resumen nutricional completo del d√≠a.
                    </p>
                `;
                return;
            }

            const dailyAnalysis = analyzeDailyNutrition();
            
            document.getElementById('dailySummary').innerHTML = `
                <div class="daily-summary">
                    <div class="daily-metric">
                        <h4>Total Calor√≠as</h4>
                        <div class="value">${Math.round(dailyAnalysis.totals.calories)}</div>
                    </div>
                    <div class="daily-metric">
                        <h4>Prote√≠na Total</h4>
                        <div class="value">${Math.round(dailyAnalysis.totals.protein)}g</div>
                    </div>
                    <div class="daily-metric">
                        <h4>Sinergias Activas</h4>
                        <div class="value">${dailyAnalysis.totalSynergies}</div>
                    </div>
                    <div class="daily-metric">
                        <h4>Conflictos Detectados</h4>
                        <div class="value">${dailyAnalysis.totalWarnings}</div>
                    </div>
                </div>
                ${generateDailyRecommendations(dailyAnalysis)}
            `;
        }

        function analyzeDailyNutrition() {
            const allMeals = ['breakfast', 'lunch', 'dinner'];
            let totalSynergies = 0;
            let totalWarnings = 0;
            
            const dailyTotals = {
                calories: 0,
                protein: 0,
                carbs: 0,
                fat: 0,
                fiber: 0
            };

            allMeals.forEach(meal => {
                if (selectedFoods[meal].length > 0) {
                    const analysis = analyzeMealNutrition(selectedFoods[meal]);
                    totalSynergies += analysis.synergies.length;
                    totalWarnings += analysis.warnings.length;
                    
                    Object.keys(dailyTotals).forEach(nutrient => {
                        dailyTotals[nutrient] += analysis.totals[nutrient] || 0;
                    });
                }
            });

            return {
                totals: dailyTotals,
                totalSynergies,
                totalWarnings
            };
        }

        function generateDailyRecommendations(dailyAnalysis) {
            const recommendations = [];
            
            if (dailyAnalysis.totals.protein < 60) {
                recommendations.push("Considera aumentar la prote√≠na total del d√≠a");
            }
            
            if (dailyAnalysis.totals.fiber < 25) {
                recommendations.push("Aumenta el consumo de fibra con m√°s vegetales y frutas");
            }
            
            if (dailyAnalysis.totalWarnings > 3) {
                recommendations.push("Revisa las inhibiciones detectadas para optimizar absorci√≥n");
            }
            
            if (dailyAnalysis.totalSynergies < 3) {
                recommendations.push("Busca m√°s combinaciones sin√©rgicas para maximizar nutrientes");
            }

            if (recommendations.length === 0) {
                recommendations.push("¬°Excelente planificaci√≥n nutricional!");
            }

            return `
                <div class="recommendations">
                    <h4>üí° Recomendaciones del D√≠a</h4>
                    <ul class="recommendation-list">
                        ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                </div>
            `;
        }

        function clearMealSelection() {
            selectedFoods[currentMeal] = [];
            updateFoodSelectionDisplay();
            updateSelectedFoodsList();
            updateAnalysis();
            updateDailySummary();
        }

        function getMealName(meal) {
            const names = {
                breakfast: 'desayuno',
                lunch: 'almuerzo',
                dinner: 'cena'
            };
            return names[meal];
        }
    </script>

    <!-- Navegaci√≥n entre p√°ginas -->
    <div class="container">
        <div class="nav-buttons">
            <a href="../nutrisalud.html" class="nav-btn secondary">‚Üê Volver al inicio</a>
            <a href="lectura-critica-etiquetas.html" class="nav-btn">Siguiente: Lectura de Etiquetas ‚Üí</a>
        </div>
    </div>
</body>
</html>